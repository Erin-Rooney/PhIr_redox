geom_line(orientation = "y", show.legend = FALSE, linetype = "longdash", alpha = 0.3)+
geom_errorbar(aes(xmin=moisture_avg-moisture_sd, xmax=moisture_avg+moisture_sd), show.legend = FALSE,
width=2,
size=0.5)+
scale_color_manual(values = (pnw_palette('Sunset2', 4)))+
scale_fill_manual(values = (pnw_palette('Sunset2', 4)))+
# scale_color_manual(values = rev(c("#f94144", "#f8961e", "#57cc99", "#4361ee")))+
# scale_fill_manual(values = rev(c("#f94144", "#f8961e", "#57cc99", "#4361ee")))+
ylim(60, 0)+
labs(x = 'Hydric
soil moisture (%)
',
y = "depth (cm)",
color = "", fill = "")+
scale_x_continuous(position="top", breaks = c(0, 20, 40, 60), n.breaks=4, limits = c(0, 60))+
facet_grid(position~site, switch = "x")+
theme_er1()+
theme(legend.position = "none",
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(),
strip.placement = "outside",
strip.text.y = element_blank(), panel.border = element_rect(color="gray",size=0.25, fill = NA))
#axis.text.x = element_text(size = 12, hjust=0.8,vjust=0.2,angle = 90))  #remove y axis ticks
grouped_moisture_forfigs_temporal2022 %>%
filter(moisture_avg > 10) %>%
mutate(month = factor(month, levels = c("early summer", "mid summer", "late summer", "early fall")))   %>%
mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
ggplot(aes(y = depth_cm, x = moisture_avg, color = month, fill = month), group = 'month')+
geom_point(size = 4, alpha = 0.8, shape = c(21))+
geom_line(orientation = "y", show.legend = FALSE, linetype = "longdash")+
geom_errorbar(aes(xmin=moisture_avg-moisture_sd, xmax=moisture_avg+moisture_sd), show.legend = FALSE, width = 2)+
scale_color_manual(values = (pnw_palette('Sunset2', 4)))+
scale_fill_manual(values = (pnw_palette('Sunset2', 4)))+
# scale_color_manual(values = rev(c("#f94144", "#f8961e", "#57cc99", "#4361ee")))+
# scale_fill_manual(values = rev(c("#f94144", "#f8961e", "#57cc99", "#4361ee")))+
ylim(60, 0)+
labs(x = '2022
soil moisture (%)',
y = "depth (cm)",
color = "", fill = "")+
scale_x_continuous(position="top", breaks = c(0, 10, 20, 30, 40, 50, 60), n.breaks = 7, limits = c(0, 60))+
facet_grid(position~site, switch = "x")+
theme_er1()+
theme(legend.position = "none",
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(),
strip.placement = "outside",
strip.text.y = element_blank(),
axis.text.x = element_text(size = 7.5, hjust=0.8,vjust=0.2,angle = 90))  #remove y axis ticks
source("code/0-packages.R")
anions_dat = read.csv("raw/PhIr2022_porwater_IC anions_master_ev.csv") %>%
janitor::clean_names() %>%
mutate(area = recode(area, "East" = "acidic tundra",
"West" = "non-acidic tundra")) %>%
mutate(area = factor(area, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(site = factor(site, levels = c("Dry", "Mesic", "Hydric")))
nitrate_summary =
anions_dat %>%
dplyr::select(c(area, site, depth_cm, no3n_ppm)) %>%
na.omit() %>%
group_by(area, site, depth_cm) %>%
dplyr::summarize(mean_no3n_ppm = round(mean(no3n_ppm), 3),
sd_no3n_ppm = round(sd(no3n_ppm), 2))
phosphate_summary =
anions_dat %>%
dplyr::select(c(area, site, depth_cm, po4_p_ppm)) %>%
na.omit() %>%
group_by(area, site, depth_cm) %>%
dplyr::summarize(mean_po4_p_ppm = round(mean(po4_p_ppm), 3),
sd_po4_p_ppm = round(sd(po4_p_ppm), 2))
nitrate_fig =
nitrate_summary %>%
ggplot()+
geom_point(aes(x = mean_no3n_ppm, y = depth_cm, color = area, shape = area), size = 2.5)+
geom_line(aes(x = mean_no3n_ppm, y = depth_cm, color = area, group = area), orientation = "y", size = 1)+
geom_ribbon(aes(xmin = mean_no3n_ppm-sd_no3n_ppm, xmax = mean_no3n_ppm+sd_no3n_ppm,
y = depth_cm, fill = area, color = area, group = area), alpha = 0.4, size = 0.2)+
scale_color_manual(values = c("#5aaa95", "#bb9f06"))+
scale_fill_manual(values = c("#5aaa95", "#bb9f06"))+
scale_y_reverse()+
scale_x_continuous(position="bottom", breaks = c(0, 0.5, 1.0, 1.5), n.breaks=4, limits = c(-0.2, 1.7))+
labs(x = "Nitrate-N (ppm)",
y = "Depth (cm)",
color = " ",
fill = " ")+
facet_grid(site ~ .)+
guides(color = guide_legend(nrow = 2))+
theme_er1()+
theme(legend.position = "bottom", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), panel.border = element_rect(color="gray",size=0.25, fill = NA),
strip.text.y = element_blank(), axis.title.y = element_blank(), axis.ticks.y = element_blank(), axis.text.y = element_blank())
nitrate_fig2 =
nitrate_summary %>%
ggplot()+
geom_point(aes(x = mean_no3n_ppm, y = depth_cm, color = area, shape = area), size = 2)+
geom_line(aes(x = mean_no3n_ppm, y = depth_cm, color = area, group = area), orientation = "y", size = 0.5)+
geom_errorbar(aes(xmin = mean_no3n_ppm-sd_no3n_ppm, xmax = mean_no3n_ppm+sd_no3n_ppm,
y = depth_cm, fill = area, color = area), alpha = 0.5, width = 1)+
scale_color_manual(values = c("#5aaa95", "#bb9f06"))+
scale_fill_manual(values = c("#5aaa95", "#bb9f06"))+
scale_y_reverse()+
scale_x_continuous(position="bottom", breaks = c(0, 0.5, 1.0, 1.5), n.breaks=4, limits = c(-0.2, 1.7))+
labs(x = "Nitrate-N (ppm)",
y = "Depth (cm)",
color = " ",
fill = " ")+
facet_grid(site ~ .)+
guides(color = guide_legend(nrow = 2))+
theme_er1()+
theme(legend.position = "bottom", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), panel.border = element_rect(color="gray",size=0.25, fill = NA),
strip.text.y = element_blank(), axis.title.y = element_blank(), axis.ticks.y = element_blank(), axis.text.y = element_blank())
phosphate_summary %>%
ggplot()+
# geom_line(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, group = area), orientation = "y", size = 1)+
# geom_ribbon(aes(xmin = mean_po4_p_ppm-sd_po4_p_ppm, xmax = mean_po4_p_ppm+sd_po4_p_ppm,
#                 y = depth_cm, fill = area, color = area, group = area), alpha = 0.4, size = 0.2)+
# geom_point(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, shape = area), size = 2)+
geom_line(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, group = area), orientation = "y", size = 0.5)+
geom_errorbar(aes(xmin = mean_po4_p_ppm-sd_po4_p_ppm, xmax = mean_po4_p_ppm+sd_po4_p_ppm,
y = depth_cm, fill = area, color = area), alpha = 0.5, width = 1)+
scale_color_manual(values = c("#5aaa95", "#bb9f06"))+
scale_fill_manual(values = c("#5aaa95", "#bb9f06"))+
scale_y_reverse()+
#scale_x_continuous(position="bottom", breaks = c(0, 0.5, 1.0, 1.5), n.breaks=4, limits = c(-0.2, 1.7))+
labs(x = "Phosphate (ppm)",
y = "Depth (cm)",
color = " ",
fill = " ")+
facet_grid(site ~ .)+
guides(color = guide_legend(nrow = 2))+
theme_er1()+
theme(legend.position = "bottom", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), panel.border = element_rect(color="gray",size=0.25, fill = NA),
strip.text.y = element_blank(), axis.title.y = element_blank(), axis.ticks.y = element_blank(), axis.text.y = element_blank())
phosphate_fig =
phosphate_summary %>%
ggplot()+
# geom_line(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, group = area), orientation = "y", size = 1)+
# geom_ribbon(aes(xmin = mean_po4_p_ppm-sd_po4_p_ppm, xmax = mean_po4_p_ppm+sd_po4_p_ppm,
#                 y = depth_cm, fill = area, color = area, group = area), alpha = 0.4, size = 0.2)+
# geom_point(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, shape = area), size = 2)+
geom_line(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, group = area), orientation = "y", size = 0.5)+
geom_errorbar(aes(xmin = mean_po4_p_ppm-sd_po4_p_ppm, xmax = mean_po4_p_ppm+sd_po4_p_ppm,
y = depth_cm, fill = area, color = area), alpha = 0.5, width = 1)+
scale_color_manual(values = c("#5aaa95", "#bb9f06"))+
scale_fill_manual(values = c("#5aaa95", "#bb9f06"))+
scale_y_reverse()+
#scale_x_continuous(position="bottom", breaks = c(0, 0.5, 1.0, 1.5), n.breaks=4, limits = c(-0.2, 1.7))+
labs(x = "Phosphate (ppm)",
y = "Depth (cm)",
color = " ",
fill = " ")+
facet_grid(site ~ .)+
guides(color = guide_legend(nrow = 2))+
theme_er1()+
theme(legend.position = "bottom", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), panel.border = element_rect(color="gray",size=0.25, fill = NA),
strip.text.y = element_blank(), axis.title.y = element_blank(), axis.ticks.y = element_blank(), axis.text.y = element_blank())
ggsave("output/phosphate_line_fig.png", plot = phosphate_fig, height = 8, width = 1.5)
phosphate_fig =
phosphate_summary %>%
ggplot()+
# geom_line(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, group = area), orientation = "y", size = 1)+
# geom_ribbon(aes(xmin = mean_po4_p_ppm-sd_po4_p_ppm, xmax = mean_po4_p_ppm+sd_po4_p_ppm,
#                 y = depth_cm, fill = area, color = area, group = area), alpha = 0.4, size = 0.2)+
# geom_point(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, shape = area), size = 2)+
geom_line(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, group = area), orientation = "y", size = 0.5)+
geom_errorbar(aes(xmin = mean_po4_p_ppm-sd_po4_p_ppm, xmax = mean_po4_p_ppm+sd_po4_p_ppm,
y = depth_cm, fill = area, color = area), alpha = 0.5, width = 1)+
scale_color_manual(values = c("#5aaa95", "#bb9f06"))+
scale_fill_manual(values = c("#5aaa95", "#bb9f06"))+
scale_y_reverse()+
scale_x_continuous(position="bottom", breaks = c(0, 0.001), n.breaks=2, limits = c(0, 0.0011))+
labs(x = "Phosphate (ppm)",
y = "Depth (cm)",
color = " ",
fill = " ")+
facet_grid(site ~ .)+
guides(color = guide_legend(nrow = 2))+
theme_er1()+
theme(legend.position = "bottom", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), panel.border = element_rect(color="gray",size=0.25, fill = NA))
ggsave("output/phosphate_line_fig.png", plot = phosphate_fig, height = 8, width = 1.5)
phosphate_fig =
phosphate_summary %>%
ggplot()+
# geom_line(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, group = area), orientation = "y", size = 1)+
# geom_ribbon(aes(xmin = mean_po4_p_ppm-sd_po4_p_ppm, xmax = mean_po4_p_ppm+sd_po4_p_ppm,
#                 y = depth_cm, fill = area, color = area, group = area), alpha = 0.4, size = 0.2)+
# geom_point(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, shape = area), size = 2)+
geom_line(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, group = area), orientation = "y", size = 0.5)+
geom_errorbar(aes(xmin = mean_po4_p_ppm-sd_po4_p_ppm, xmax = mean_po4_p_ppm+sd_po4_p_ppm,
y = depth_cm, fill = area, color = area), alpha = 0.5, width = 1)+
scale_color_manual(values = c("#5aaa95", "#bb9f06"))+
scale_fill_manual(values = c("#5aaa95", "#bb9f06"))+
scale_y_reverse()+
scale_x_continuous(position="bottom", breaks = c(0, 0.001), n.breaks=2, limits = c(0, 0.0011))+
labs(x = "Phosphate (ppm)",
y = "Depth (cm)",
color = " ",
fill = " ")+
facet_grid(site ~ .)+
guides(color = guide_legend(nrow = 2))+
theme_er1()+
theme(legend.position = "bottom", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), panel.border = element_rect(color="gray",size=0.25, fill = NA))
ggsave("output/phosphate_line_fig.png", plot = phosphate_fig, height = 8, width = 1.5)
ggsave("output/phosphate_line_fig.png", plot = phosphate_fig, height = 8, width = 2.5)
knitr::opts_chunk$set(echo = TRUE)
source("code/0-packages.R")
combo_redox_withdepths_2022 = read.csv("processed/2022all_combine_temporary.csv")
combo_redox_withdepths_2021 = read.csv("processed/all_combine_temporary.csv")
source("code/0-packages.R")
combo_redox_withdepths2022 = read.csv("processed/allcombine_2022_frozen.csv")
combo_redox_withdepths2021 = read.csv("processed/allcombine_2021_frozen.csv")
all_redox_data_fordatabase =
combo_redox_withdepths2021 %>%
dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen) %>%
rbind(combo_redox_withdepths2022 %>% dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen))
View(all_redox_data_fordatabase)
all_redox_data_fordatabase =
combo_redox_withdepths2021 %>%
dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen) %>%
rbind(combo_redox_withdepths2022 %>% dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen)) %>%
rename(redox_mV = avg_values_fixed)
all_redox_data_fordatabase =
combo_redox_withdepths2021 %>%
dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen) %>%
rbind(combo_redox_withdepths2022 %>% dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen)) %>%
rename(redox_mV = avg_values_fixed,
area = site,
site = position)
all_redox_data_fordatabase =
combo_redox_withdepths2021 %>%
dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen) %>%
rbind(combo_redox_withdepths2022 %>% dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen)) %>%
rename(redox_mV = avg_values_fixed,
area = site,
site = position,
sensor_frozen = frozen)
all_redox_data_fordatabase =
combo_redox_withdepths2021 %>%
dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen) %>%
rbind(combo_redox_withdepths2022 %>% dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen)) %>%
rename(redox_mV = avg_values_fixed,
area = site,
site = position,
status = frozen)
all_redox_data_fordatabase =
combo_redox_withdepths2021 %>%
dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen) %>%
rbind(combo_redox_withdepths2022 %>% dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen)) %>%
rename(redox_mV = avg_values_fixed,
area = site,
site = position,
condition = frozen)
write.csv(all_redox_data_fordatabase, "processed/PhIr_redox_2021_2022.csv")
final_temp_sal_moist = read.csv("processed/final_temp_salinity_avgs.csv")
final_temp_sal_moist2022 = read.csv("processed/2022final_temp_salinity_avgs.csv")
all_moisturetemp_data_fordatabase =
final_temp_sal_moist %>%
dplyr::select(TIMESTAMP, site, position, moisture, temp, salinity, n, depth_cm) %>%
rbind(final_temp_sal_moist2022 %>% dplyr::select(TIMESTAMP, site, position, moisture, temp, salinity, n, depth_cm)) %>%
rename(area = site,
site = position)
all_moisturetemp_data_fordatabase =
final_temp_sal_moist %>%
dplyr::select(TIMESTAMP, site, position, moisture, temp, salinity, n, depth) %>%
rbind(final_temp_sal_moist2022 %>% dplyr::select(TIMESTAMP, site, position, moisture, temp, salinity, n, depth)) %>%
rename(area = site,
site = position,
depth_cm = depth)
View(all_moisturetemp_data_fordatabase)
all_moisturetemp_data_fordatabase =
final_temp_sal_moist %>%
dplyr::select(TIMESTAMP, site, position, moisture, temp, salinity, depth) %>%
rbind(final_temp_sal_moist2022 %>% dplyr::select(TIMESTAMP, site, position, moisture, temp, salinity, depth)) %>%
rename(area = site,
site = position,
depth_cm = depth)
write.csv(all_moisturetemp_data_fordatabase, "processed/PhIr_moisture_temp_salinity_2021_2022.csv")
source("code/0-packages.R")
westhydric_dlname = read.csv("processed/westhydric_dlname2022.csv")
easthydric_dlname = read.csv("processed/easthydric_dlname2022.csv")
westmesic_dlname = read.csv("processed/westmesic_dlname2022.csv")
eastmesic_dlname = read.csv("processed/eastmesic_dlname2022.csv")
westdry_dlname = read.csv("processed/westdry_dlname2022.csv")
eastdry_dlname = read.csv("processed/eastdry_dlname2022.csv")
westhydric_metadata = read.csv("processed/westhydric_metadata2022.csv")
easthydric_metadata = read.csv("processed/easthydric_metadata2022.csv")
westmesic_metadata = read.csv("processed/westmesic_metadata2022.csv")
eastmesic_metadata = read.csv("processed/eastmesic_metadata2022.csv")
westdry_metadata = read.csv("processed/westdry_metadata2022.csv")
eastdry_metadata = read.csv("processed/eastdry_metadata2022.csv")
moisture_separate <- function(dat){
dat %>%
dplyr::rename('soilmoisture_NUM_Avg' = 'X.1') %>%
# dplyr::select(c('X') &
dplyr::select(starts_with('soilmoisture'),
starts_with('soiltemperature'),
starts_with("soilsalinity")) %>%
dplyr::select(ends_with('Avg')) %>%
dplyr::rename(redox_NUM_Avg = soilmoisture_NUM_Avg,
moisture_5 = soilmoisture5cm_Avg,
moisture_15 = soilmoisture15cm_Avg,
moisture_25 = soilmoisture25cm_Avg,
temp_5 = soiltemperature5cm_Avg,
temp_15 = soiltemperature15cm_Avg,
temp_25 = soiltemperature25cm_Avg,
salinity_5 = soilsalinity5cm_Avg,
salinity_15 = soilsalinity15cm_Avg,
salinity_25 = soilsalinity25cm_Avg
) %>%
force()
}
moisture_separate_std <- function(dat){
dat %>%
dplyr::rename('soilmoisture_NUM_Std' = 'X.1') %>%
# dplyr::select(c('X') &
dplyr::select(starts_with('soilmoisture'),
starts_with('soiltemperature'),
starts_with("soilsalinity")) %>%
dplyr::select(ends_with('Std')) %>%
dplyr::rename(redox_NUM_Std = soilmoisture_NUM_Std,
moisture_5 = soilmoisture5cm_Std,
moisture_15 = soilmoisture15cm_Std,
moisture_25 = soilmoisture25cm_Std,
temp_5 = soiltemperature5cm_Std,
temp_15 = soiltemperature15cm_Std,
temp_25 = soiltemperature25cm_Std,
salinity_5 = soilsalinity5cm_Std,
salinity_15 = soilsalinity15cm_Std,
salinity_25 = soilsalinity25cm_Std
) %>%
force()
}
westhydric_moisture =
moisture_separate(westhydric_dlname) %>%
#dplyr::select(-soiltemperature_Avg) %>%
left_join(westhydric_metadata, by = 'redox_NUM_Avg') %>%
pivot_longer(-c("redox_NUM_Avg", "X", "redox_NUM_Std", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = c("type", "depth"), names_sep= "_", values_to = 'avg_values') %>%
filter(type != 'redox') %>%
pivot_wider(names_from = "type", values_from = "avg_values") %>%
# group_by(RECORD, TIMESTAMP, depth) %>%
# dplyr::mutate(n = n()) %>%
# ungroup() %>%
dplyr::select(-c(redox_NUM_Avg, X)) %>%
mutate(moisture = as.numeric(moisture),
temp = as.numeric(temp),
salinity = as.numeric(salinity)) %>%
force()
westhydric_moisture_std =
moisture_separate_std(westhydric_dlname) %>%
left_join(westhydric_metadata, by = 'redox_NUM_Std') %>%
filter(redox_NUM_Std > 2304) %>%
dplyr::select(-redox_NUM_Avg) %>%
pivot_longer(-c("redox_NUM_Std", "X", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = c("type", "depth"), names_sep= "_", values_to = 'std_values') %>%
filter(type != 'redox') %>%
pivot_wider(names_from = "type", values_from = "std_values") %>%
# group_by(RECORD, TIMESTAMP, depth) %>%
# dplyr::mutate(n = n()) %>%
# ungroup() %>%
dplyr::select(-c(redox_NUM_Std, X)) %>%
mutate(moisture = as.numeric(moisture),
temp = as.numeric(temp),
salinity = as.numeric(salinity)) %>%
force()
westmesic_moisture =
moisture_separate(westmesic_dlname) %>%
dplyr::select(-soiltemperature_Avg) %>%
left_join(westmesic_metadata, by = 'redox_NUM_Avg') %>%
pivot_longer(-c("redox_NUM_Avg", "X", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = c("type", "depth"), names_sep= "_", values_to = 'avg_values') %>%
filter(type != 'redox') %>%
pivot_wider(names_from = "type", values_from = "avg_values") %>%
dplyr::select(-c(redox_NUM_Avg, X)) %>%
force()
westmesic_moisture_std =
moisture_separate_std(westmesic_dlname) %>%
left_join(westmesic_metadata, by = 'redox_NUM_Std') %>%
#filter(redox_NUM_Std > 2304) %>%
dplyr::select(-redox_NUM_Avg) %>%
pivot_longer(-c("redox_NUM_Std", "X", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = c("type", "depth"), names_sep= "_", values_to = 'std_values') %>%
filter(type != 'redox') %>%
pivot_wider(names_from = "type", values_from = "std_values") %>%
# group_by(RECORD, TIMESTAMP, depth) %>%
# dplyr::mutate(n = n()) %>%
# ungroup() %>%
dplyr::select(-c(redox_NUM_Std, X)) %>%
mutate(moisture = as.numeric(moisture),
temp = as.numeric(temp),
salinity = as.numeric(salinity)) %>%
force()
westdry_moisture =
moisture_separate(westdry_dlname) %>%
dplyr::select(-soiltemperature_Avg) %>%
left_join(westdry_metadata, by = 'redox_NUM_Avg') %>%
pivot_longer(-c("redox_NUM_Avg", "X", "TIMESTAMP", "redox_NUM_Std", "RECORD", "site", "position", "Betterdate"),
names_to = c("type", "depth"), names_sep= "_", values_to = 'avg_values') %>%
filter(type != 'redox') %>%
pivot_wider(names_from = "type", values_from = "avg_values") %>%
dplyr::select(-c(redox_NUM_Avg, X)) %>%
mutate(moisture = as.numeric(moisture),
temp = as.numeric(temp),
salinity = as.numeric(salinity)) %>%
force()
westdry_moisture_std =
moisture_separate_std(westdry_dlname) %>%
left_join(westdry_metadata, by = 'redox_NUM_Std') %>%
filter(redox_NUM_Std > 1981) %>%
dplyr::select(-redox_NUM_Avg, -soiltemperature_Std) %>%
pivot_longer(-c("redox_NUM_Std", "X", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = c("type", "depth"), names_sep= "_", values_to = 'std_values') %>%
filter(type != 'redox') %>%
pivot_wider(names_from = "type", values_from = "std_values") %>%
# group_by(RECORD, TIMESTAMP, depth) %>%
# dplyr::mutate(n = n()) %>%
# ungroup() %>%
dplyr::select(-c(redox_NUM_Std, X)) %>%
mutate(moisture = as.numeric(moisture),
temp = as.numeric(temp),
salinity = as.numeric(salinity)) %>%
force()
easthydric_moisture =
moisture_separate(easthydric_dlname) %>%
dplyr::select(-soiltemperature_Avg) %>%
left_join(easthydric_metadata, by = 'redox_NUM_Avg') %>%
pivot_longer(-c("redox_NUM_Avg", "X", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = c("type", "depth"), names_sep= "_", values_to = 'avg_values') %>%
filter(type != 'redox') %>%
pivot_wider(names_from = "type", values_from = "avg_values") %>%
dplyr::select(-c(redox_NUM_Avg, X)) %>%
filter(RECORD != c(0)) %>%
force()
easthydric_moisture_std =
moisture_separate_std(easthydric_dlname) %>%
left_join(easthydric_metadata, by = 'redox_NUM_Std') %>%
#filter(redox_NUM_Std > 2304) %>%
dplyr::select(-redox_NUM_Avg) %>%
pivot_longer(-c("redox_NUM_Std", "X", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = c("type", "depth"), names_sep= "_", values_to = 'std_values') %>%
filter(type != 'redox') %>%
pivot_wider(names_from = "type", values_from = "std_values") %>%
# group_by(RECORD, TIMESTAMP, depth) %>%
# dplyr::mutate(n = n()) %>%
# ungroup() %>%
dplyr::select(-c(redox_NUM_Std, X)) %>%
mutate(moisture = as.numeric(moisture),
temp = as.numeric(temp),
salinity = as.numeric(salinity)) %>%
force()
eastmesic_moisture =
moisture_separate(eastmesic_dlname) %>%
dplyr::select(-soiltemperature_Avg) %>%
left_join(eastmesic_metadata, by = 'redox_NUM_Avg') %>%
pivot_longer(-c("redox_NUM_Avg", "X", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = c("type", "depth"), names_sep= "_", values_to = 'avg_values') %>%
filter(type != 'redox') %>%
pivot_wider(names_from = "type", values_from = "avg_values")%>%
dplyr::select(-c(redox_NUM_Avg, X)) %>%
filter(RECORD != c(1628, 766)) %>%
force()
eastmesic_moisture_std =
moisture_separate_std(eastmesic_dlname) %>%
left_join(eastmesic_metadata, by = 'redox_NUM_Std') %>%
#filter(redox_NUM_Std > 2304) %>%
dplyr::select(-redox_NUM_Avg) %>%
pivot_longer(-c("redox_NUM_Std", "X", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = c("type", "depth"), names_sep= "_", values_to = 'std_values') %>%
filter(type != 'redox') %>%
pivot_wider(names_from = "type", values_from = "std_values") %>%
# group_by(RECORD, TIMESTAMP, depth) %>%
# dplyr::mutate(n = n()) %>%
# ungroup() %>%
dplyr::select(-c(redox_NUM_Std, X)) %>%
mutate(moisture = as.numeric(moisture),
temp = as.numeric(temp),
salinity = as.numeric(salinity)) %>%
force()
eastdry_moisture =
moisture_separate(eastdry_dlname) %>%
dplyr::select(-soiltemperature_Avg) %>%
left_join(eastdry_metadata, by = 'redox_NUM_Avg') %>%
pivot_longer(-c("redox_NUM_Avg", "X", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = c("type", "depth"), names_sep= "_", values_to = 'avg_values') %>%
filter(type != 'redox') %>%
pivot_wider(names_from = "type", values_from = "avg_values")%>%
dplyr::select(-c(redox_NUM_Avg, X)) %>%
filter(RECORD != c(7019)) %>%
force()
eastdry_moisture_std =
moisture_separate_std(eastdry_dlname) %>%
left_join(eastdry_metadata, by = 'redox_NUM_Std') %>%
#filter(redox_NUM_Std > 2304) %>%
dplyr::select(-redox_NUM_Avg) %>%
pivot_longer(-c("redox_NUM_Std", "X", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = c("type", "depth"), names_sep= "_", values_to = 'std_values') %>%
filter(type != 'redox') %>%
pivot_wider(names_from = "type", values_from = "std_values") %>%
# group_by(RECORD, TIMESTAMP, depth) %>%
# dplyr::mutate(n = n()) %>%
# ungroup() %>%
dplyr::select(-c(redox_NUM_Std, X)) %>%
mutate(moisture = as.numeric(moisture),
temp = as.numeric(temp),
salinity = as.numeric(salinity)) %>%
force()
View(eastdry_dlname)
