# filter(Area == "acidic tundra" & Site == "Hydric" & ICP == "P_ug_mL") %>%
filter(ICP == "K_ug_mL") %>%
ggplot() +
geom_point(aes(x = concentration, y = Depth_cm, color = month), size = 3.5, alpha = 0.75)+
geom_line(aes(x = concentration, y = Depth_cm, color = month, group = grouping), orientation = "y", size = 0.75, linetype = "dotted")+
labs(x = "Potassium concentration, Î¼g/ml",
y = "depth, cm",
color = "month, 2022"
)+
scale_color_manual(values = (pnw_palette('Sunset2', 4)))+
scale_fill_manual(values = (pnw_palette('Sunset2', 4)))+
scale_y_reverse()+
facet_grid(Site~Area, scales = "free_x")+
theme_er1()+
theme(legend.position = "right",
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(),
strip.placement = "outside",
strip.text.y = element_blank(),
# axis.text.y=element_blank(),  #remove y axis labels
# axis.ticks.y=element_blank(),
axis.text.x = element_text(size = 9, hjust=0.8,vjust=0.2,angle = 90))
ggsave("output/K_concentration_fig.png", plot = K_concentration_fig, height = 5.5, width = 6.5)
library(patchwork)
nutrientsfig1 = Al_concentration_fig + Na_concentration_fig
nutrientsfig2 = K_concentration_fig + Mg_concentration_fig
nutrient_plot = nutrientsfig1 / nutrientsfig2 + plot_layout(guides = "collect")
# ggsave("output/2022nutrientsfigA.png", plot = nutrientsfigA, height = 9, width = 11)
# ggsave("output/2022nutrientsfigB.png", plot = nutrientsfigB, height = 10, width = 8)
ggsave("output/2022nutrient_plot2.png", plot = nutrient_plot, height = 12, width = 9.5)
nutrientsfig1 / nutrientsfig2 + plot_layout(guides = "collect")
nutrient_plot = nutrientsfig1 / nutrientsfig2 + plot_layout(guides = "collect")
ggsave("output/2022nutrient_plot2.png", plot = nutrient_plot, height = 12, width = 9.5)
source("code/0-packages.R")
final_temp_sal_moist = read.csv("processed/final_temp_salinity_avgs.csv")
final_temp_sal_moist2022 = read.csv("processed/2022final_temp_salinity_avgs.csv")
library(lubridate)
final_temp_sal_moist_forfig =
final_temp_sal_moist %>%
mutate(forsep = TIMESTAMP) %>%
separate(TIMESTAMP, sep = " ", into = c("date2", "time")) %>%
separate(date2, sep = "/", into =c('month', 'day', 'year')) %>%
mutate(date = as.Date(paste(year, month, day, sep = "-"))) %>%
mutate(datetime = ymd_hm(paste(date, time)),
date = ymd(date)) %>%
separate(forsep, sep = " ", into = c("date", "time")) %>%
separate(date, sep = "/", into = c("month", "day", "year")) %>%
mutate(month = recode(month,  "6" = "June",
"7" = "July",
"8" = "August",
"9" = "September")) %>%
mutate(position = factor(position, levels = c("dry", "mesic", "hydric"))) %>%
mutate(site = recode(site, "east" = "acidic tundra",
"west" = "non-acidic tundra")) %>%
dplyr::rename(depth_cm = depth) %>%
na.omit() %>%
mutate(frozen = case_when(temp < -1 ~ "frozen", TRUE ~ "unfrozen"))
final_temp_sal_moist_forfig2022 =
final_temp_sal_moist2022 %>%
mutate(forsep = TIMESTAMP) %>%
separate(TIMESTAMP, sep = " ", into = c("date2", "time")) %>%
separate(date2, sep = "/", into =c('month', 'day', 'year')) %>%
mutate(date = as.Date(paste(year, month, day, sep = "-"))) %>%
mutate(datetime = ymd_hm(paste(date, time)),
date = ymd(date)) %>%
separate(forsep, sep = " ", into = c("date", "time")) %>%
separate(date, sep = "/", into = c("month", "day", "year")) %>%
mutate(month = recode(month,  "6" = "early summer",
"7" = "mid summer",
"8" = "late summer",
"9" = "early fall")) %>%
mutate(position = factor(position, levels = c("dry", "mesic", "hydric"))) %>%
mutate(site = recode(site, "east" = "acidic tundra",
"west" = "non-acidic tundra")) %>%
dplyr::rename(depth_cm = depth) %>%
na.omit() %>%
mutate(frozen = case_when(temp < -1 ~ "frozen", TRUE ~ "unfrozen"))
grouped_moisture_forfigs_temporal =
final_temp_sal_moist_forfig %>%
filter(moisture > 1) %>%
mutate(position = factor(position, levels = c("dry", "mesic", "hydric"))) %>%
mutate(site = recode(site, "east" = "acidic tundra",
"west" = "non-acidic tundra")) %>%
group_by(site, position, depth_cm, month) %>%
dplyr::summarise(moisture_avg = round(mean(moisture),2),
moisture_sd = round(sd(moisture),2),
moisture_se = round(sd(moisture)/sqrt(n()),2))
grouped_moisture_forfigs_temporal2022 =
final_temp_sal_moist_forfig2022 %>%
filter(moisture > 1) %>%
mutate(position = factor(position, levels = c("dry", "mesic", "hydric"))) %>%
mutate(site = recode(site, "east" = "acidic tundra",
"west" = "non-acidic tundra")) %>%
group_by(site, position, depth_cm, month) %>%
dplyr::summarise(moisture_avg = round(mean(moisture),2),
moisture_sd = round(sd(moisture),2),
moisture_se = round(sd(moisture)/sqrt(n()),2))
grouped_moisture2022 =
final_temp_sal_moist_forfig2022 %>%
filter(moisture > 10) %>%
mutate(position = factor(position, levels = c("dry", "mesic", "hydric"))) %>%
mutate(site = recode(site, "east" = "acidic tundra",
"west" = "non-acidic tundra")) %>%
group_by(site, position, depth_cm) %>%
dplyr::summarise(moisture_avg = round(mean(moisture),2),
moisture_sd = round(sd(moisture),2),
moisture_se = round(sd(moisture)/sqrt(n()),2))
nonacidic_moisture_fig =
grouped_moisture %>%
filter(site == "non-acidic tundra") %>%
mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
ggplot(aes(y = depth_cm, x = moisture_avg, color = position, fill = position), group = 'position')+
geom_point(size = 3.5, alpha = 0.8, shape = c(21))+
geom_line(orientation = "y", show.legend = FALSE, linetype="longdash", alpha = 0.3)+
geom_errorbar(aes(xmin=moisture_avg-moisture_sd, xmax=moisture_avg+moisture_sd), show.legend = FALSE, width = 1)+
scale_color_manual(values = c("#bc4749", "#35a55f", "#0582ca"))+
scale_fill_manual(values = c("#bc4749", "#35a55f", "#0582ca"))+
# scale_color_manual(values = c("#9a031e", "#a7c957", "#1e96fc"))+
# scale_fill_manual(values = c("#9a031e", "#a7c957", "#1e96fc"))+
ylim(60, 0)+
labs(
x = '
soil moisture, %
',
y = "depth (cm)",
color = "", fill = "")+
scale_x_continuous(position="top", breaks = c(0, 20, 40, 60), n.breaks=4, limits = c(0, 60))+
facet_grid(.~site, switch = "x")+
theme_er1()+
theme(legend.position = "none", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), panel.border = element_rect(color="gray",size=0.25, fill = NA))
final_temp_sal_moist_forfig %>%
filter(position == "dry" & datetime > "2021-07-06 00:00:00") %>%
mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(month = factor(month, levels = c("early summer", "mid summer", "late summer", "early fall")))   %>%
#filter(site == "acidic tundra") %>%
#filter(position == "dry") %>%
mutate(depth_cm = recode(depth_cm, "5" = "0-10", "15" = "10-20", "25" = "20-30")) %>%
mutate(depth_2 = factor(depth_cm, levels = c("0-10", "10-20", "20-30")))   %>%
#mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
ggplot()+
#geom_point(aes(y = temp, x = datetime, color = depth_2, group = depth_2), size = 0.25)+
geom_line(aes(y = moisture, x = datetime, color = depth_2, group = depth_2), size = 0.5)+
scale_x_datetime(date_breaks = "2 week", date_labels = "%b-%d")+
#ylim(25, 5)+
labs(x = " ", y = "soil moisture
(%)",
color = "soil depth cm")+
#scale_fill_manual(values=natparks.pals("Arches", 11))+
scale_color_manual(values=(pnw_palette("Lake", 3)))+
guides(colour = guide_legend(override.aes = list(size=6)))+
facet_grid(.~site, scales = "free_x")+
theme_er1()+
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank(),
axis.text.y = element_text(size = 12),
legend.position = "right", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(),
axis.title.x = element_text(size = 13),
axis.title.y = element_text(size = 13),
strip.text.y = element_text(size = 13),
strip.text.x = element_text(size = 13),
panel.border = element_rect(color="gray",size=0.5, fill = NA))
final_temp_sal_moist_forfig %>%
filter(position == "dry" & datetime > "2021-07-06 00:00:00" & datetime < "2021-09-10 00:00:00") %>%
mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(month = factor(month, levels = c("early summer", "mid summer", "late summer", "early fall")))   %>%
#filter(site == "acidic tundra") %>%
#filter(position == "dry") %>%
mutate(depth_cm = recode(depth_cm, "5" = "0-10", "15" = "10-20", "25" = "20-30")) %>%
mutate(depth_2 = factor(depth_cm, levels = c("0-10", "10-20", "20-30")))   %>%
#mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
ggplot()+
#geom_point(aes(y = temp, x = datetime, color = depth_2, group = depth_2), size = 0.25)+
geom_line(aes(y = moisture, x = datetime, color = depth_2, group = depth_2), size = 0.5)+
scale_x_datetime(date_breaks = "2 week", date_labels = "%b-%d")+
#ylim(25, 5)+
labs(x = " ", y = "soil moisture
(%)",
color = "soil depth cm")+
#scale_fill_manual(values=natparks.pals("Arches", 11))+
scale_color_manual(values=(pnw_palette("Lake", 3)))+
guides(colour = guide_legend(override.aes = list(size=6)))+
facet_grid(.~site, scales = "free_x")+
theme_er1()+
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank(),
axis.text.y = element_text(size = 12),
legend.position = "right", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(),
axis.title.x = element_text(size = 13),
axis.title.y = element_text(size = 13),
strip.text.y = element_text(size = 13),
strip.text.x = element_text(size = 13),
panel.border = element_rect(color="gray",size=0.5, fill = NA))
final_temp_sal_moist_forfig %>%
filter(position == "dry" & datetime > "2021-07-06 00:00:00" & datetime < "2021-09-10 00:00:00") %>%
mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(month = factor(month, levels = c("early summer", "mid summer", "late summer", "early fall")))   %>%
#filter(site == "acidic tundra") %>%
#filter(position == "dry") %>%
mutate(depth_cm = recode(depth_cm, "5" = "0-10", "15" = "10-20", "25" = "20-30")) %>%
mutate(depth_2 = factor(depth_cm, levels = c("0-10", "10-20", "20-30")))   %>%
#mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
ggplot()+
#geom_point(aes(y = temp, x = datetime, color = depth_2, group = depth_2), size = 0.25)+
geom_line(aes(y = moisture, x = datetime, color = depth_2, group = depth_2), size = 0.5)+
scale_x_datetime(date_breaks = "2 week", date_labels = "%b-%d", limits = c("2021-07-06 00:00:00", "2021-09-10 00:00:00"))+
#ylim(25, 5)+
labs(x = " ", y = "soil moisture
(%)",
color = "soil depth cm")+
#scale_fill_manual(values=natparks.pals("Arches", 11))+
scale_color_manual(values=(pnw_palette("Lake", 3)))+
guides(colour = guide_legend(override.aes = list(size=6)))+
facet_grid(.~site, scales = "free_x")+
theme_er1()+
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank(),
axis.text.y = element_text(size = 12),
legend.position = "right", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(),
axis.title.x = element_text(size = 13),
axis.title.y = element_text(size = 13),
strip.text.y = element_text(size = 13),
strip.text.x = element_text(size = 13),
panel.border = element_rect(color="gray",size=0.5, fill = NA))
final_temp_sal_moist_forfig %>%
filter(position == "dry" & datetime > "2021-07-06 00:00:00") %>%
mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(month = factor(month, levels = c("early summer", "mid summer", "late summer", "early fall")))   %>%
#filter(site == "acidic tundra") %>%
#filter(position == "dry") %>%
mutate(depth_cm = recode(depth_cm, "5" = "0-10", "15" = "10-20", "25" = "20-30")) %>%
mutate(depth_2 = factor(depth_cm, levels = c("0-10", "10-20", "20-30")))   %>%
#mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
ggplot()+
#geom_point(aes(y = temp, x = datetime, color = depth_2, group = depth_2), size = 0.25)+
geom_line(aes(y = moisture, x = datetime, color = depth_2, group = depth_2), size = 0.5)+
scale_x_datetime(date_breaks = "2 week", date_labels = "%b-%d")+
#ylim(25, 5)+
labs(x = " ", y = "soil moisture
(%)",
color = "soil depth cm")+
#scale_fill_manual(values=natparks.pals("Arches", 11))+
scale_color_manual(values=(pnw_palette("Lake", 3)))+
guides(colour = guide_legend(override.aes = list(size=6)))+
facet_grid(.~site, scales = "free_x")+
theme_er1()+
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank(),
axis.text.y = element_text(size = 12),
legend.position = "right", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(),
axis.title.x = element_text(size = 13),
axis.title.y = element_text(size = 13),
strip.text.y = element_text(size = 13),
strip.text.x = element_text(size = 13),
panel.border = element_rect(color="gray",size=0.5, fill = NA))
final_temp_sal_moist_forfig %>%
filter(position == "dry" & datetime > "2021-07-06 00:00:00" & moisture < 0) %>%
mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(month = factor(month, levels = c("early summer", "mid summer", "late summer", "early fall")))   %>%
#filter(site == "acidic tundra") %>%
#filter(position == "dry") %>%
mutate(depth_cm = recode(depth_cm, "5" = "0-10", "15" = "10-20", "25" = "20-30")) %>%
mutate(depth_2 = factor(depth_cm, levels = c("0-10", "10-20", "20-30")))   %>%
#mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
ggplot()+
#geom_point(aes(y = temp, x = datetime, color = depth_2, group = depth_2), size = 0.25)+
geom_line(aes(y = moisture, x = datetime, color = depth_2, group = depth_2), size = 0.5)+
scale_x_datetime(date_breaks = "2 week", date_labels = "%b-%d")+
#ylim(25, 5)+
labs(x = " ", y = "soil moisture
(%)",
color = "soil depth cm")+
#scale_fill_manual(values=natparks.pals("Arches", 11))+
scale_color_manual(values=(pnw_palette("Lake", 3)))+
guides(colour = guide_legend(override.aes = list(size=6)))+
facet_grid(.~site, scales = "free_x")+
theme_er1()+
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank(),
axis.text.y = element_text(size = 12),
legend.position = "right", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(),
axis.title.x = element_text(size = 13),
axis.title.y = element_text(size = 13),
strip.text.y = element_text(size = 13),
strip.text.x = element_text(size = 13),
panel.border = element_rect(color="gray",size=0.5, fill = NA))
final_temp_sal_moist_forfig %>%
filter(position == "dry" & datetime > "2021-07-06 00:00:00" & moisture > 0) %>%
mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(month = factor(month, levels = c("early summer", "mid summer", "late summer", "early fall")))   %>%
#filter(site == "acidic tundra") %>%
#filter(position == "dry") %>%
mutate(depth_cm = recode(depth_cm, "5" = "0-10", "15" = "10-20", "25" = "20-30")) %>%
mutate(depth_2 = factor(depth_cm, levels = c("0-10", "10-20", "20-30")))   %>%
#mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
ggplot()+
#geom_point(aes(y = temp, x = datetime, color = depth_2, group = depth_2), size = 0.25)+
geom_line(aes(y = moisture, x = datetime, color = depth_2, group = depth_2), size = 0.5)+
scale_x_datetime(date_breaks = "2 week", date_labels = "%b-%d")+
#ylim(25, 5)+
labs(x = " ", y = "soil moisture
(%)",
color = "soil depth cm")+
#scale_fill_manual(values=natparks.pals("Arches", 11))+
scale_color_manual(values=(pnw_palette("Lake", 3)))+
guides(colour = guide_legend(override.aes = list(size=6)))+
facet_grid(.~site, scales = "free_x")+
theme_er1()+
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank(),
axis.text.y = element_text(size = 12),
legend.position = "right", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(),
axis.title.x = element_text(size = 13),
axis.title.y = element_text(size = 13),
strip.text.y = element_text(size = 13),
strip.text.x = element_text(size = 13),
panel.border = element_rect(color="gray",size=0.5, fill = NA))
final_temp_sal_moist_forfig %>%
filter(position == "dry" & datetime > "2021-07-06 00:00:00" & moisture > 10) %>%
mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(month = factor(month, levels = c("early summer", "mid summer", "late summer", "early fall")))   %>%
#filter(site == "acidic tundra") %>%
#filter(position == "dry") %>%
mutate(depth_cm = recode(depth_cm, "5" = "0-10", "15" = "10-20", "25" = "20-30")) %>%
mutate(depth_2 = factor(depth_cm, levels = c("0-10", "10-20", "20-30")))   %>%
#mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
ggplot()+
#geom_point(aes(y = temp, x = datetime, color = depth_2, group = depth_2), size = 0.25)+
geom_line(aes(y = moisture, x = datetime, color = depth_2, group = depth_2), size = 0.5)+
scale_x_datetime(date_breaks = "2 week", date_labels = "%b-%d")+
#ylim(25, 5)+
labs(x = " ", y = "soil moisture
(%)",
color = "soil depth cm")+
#scale_fill_manual(values=natparks.pals("Arches", 11))+
scale_color_manual(values=(pnw_palette("Lake", 3)))+
guides(colour = guide_legend(override.aes = list(size=6)))+
facet_grid(.~site, scales = "free_x")+
theme_er1()+
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank(),
axis.text.y = element_text(size = 12),
legend.position = "right", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(),
axis.title.x = element_text(size = 13),
axis.title.y = element_text(size = 13),
strip.text.y = element_text(size = 13),
strip.text.x = element_text(size = 13),
panel.border = element_rect(color="gray",size=0.5, fill = NA))
thaw_depths = read.csv("raw/thaw_depth_2021.csv")
bd_grav_cleaned = read.csv("raw/PhIr2021_Soil_Inventory_bd.csv") %>%
#dplyr::select(-c(X)) %>%
mutate(Area = recode(Area, "East" = "acidic tundra",
"West" = "non-acidic tundra")) %>%
dplyr::mutate(soil_material = case_when(grepl("O",Horizon)~"organic",
grepl("M",Horizon)~"mineral")) %>%
mutate(volumetric_water_content_cm3_cm3 = soil_bulk_density_g_cm3 * grav_water_gh20_per_gdrysoil)
bd_select =
bd_grav_cleaned %>%
dplyr::select(Sample_ID, Core_ID, Date_collected, Area, Site, Plot_num, Plot_ID,
Horizon, Depth_1_cm, Depth_2_cm, Depth_3_cm, Depth_4_cm, Average_Depth_cm, real_depth_cm,
soil_bulk_density_g_cm3, volumetric_water_content_cm3_cm3, soil_material) %>%
mutate(label = Horizon) %>%
mutate(label = factor(label, levels = c("O", "O1", "O2", "O3", "M", "M1", "M2"))) %>%
mutate(date_simple = recode(Date_collected, "6-Jul-21" = "Plot-1", "7-Jul-21" = "Plot-1",
"13-Jul-21" = "Plot-2", "14-Jul-21" = "Plot-2",
"24-Jul-21" = "Plot-3",
"30-Jul-21" = "Plot-4", "31-Jul-21" = "Plot-4",
"7-Aug-21" = "Plot-5")) %>%
mutate(label = paste0(date_simple, "-", Plot_num))
bd_unggrouped =
bd_select %>%
filter(Site != "Transect") %>%
mutate(Site = factor(Site, levels = c("Dry", "Mesic", "Hydric"))) %>%
mutate(Horizon = factor(Horizon, levels = c("O", "O1", "O2", "O3", "M", "M1", "M2"))) %>%
dplyr::select(c(Area, Site, Horizon, soil_bulk_density_g_cm3, volumetric_water_content_cm3_cm3, real_depth_cm)) %>%
na.omit()
write.csv(bd_unggrouped, "output/bd_unggrouped.csv")
bd_unggrouped =
bd_select %>%
filter(Site != "Transect") %>%
mutate(Site = factor(Site, levels = c("Dry", "Mesic", "Hydric"))) %>%
mutate(Horizon = factor(Horizon, levels = c("O", "O1", "O2", "O3", "M", "M1", "M2"))) %>%
dplyr::select(c(Date_collected, Core_ID, Area, Site, Horizon, soil_bulk_density_g_cm3, volumetric_water_content_cm3_cm3, real_depth_cm)) %>%
na.omit()
bd_ungrouped =
bd_select %>%
filter(Site != "Transect") %>%
mutate(Site = factor(Site, levels = c("Dry", "Mesic", "Hydric"))) %>%
mutate(Horizon = factor(Horizon, levels = c("O", "O1", "O2", "O3", "M", "M1", "M2"))) %>%
dplyr::select(c(Date_collected, Core_ID, Area, Site, Horizon, soil_bulk_density_g_cm3, volumetric_water_content_cm3_cm3, real_depth_cm)) %>%
na.omit()
bd_ungrouped %>% knitr::kable()
write.csv(bd_ungrouped, "output/bd_ungrouped.csv")
soil_dat = read.csv("raw/uga_soil_analyses_detectionlimit.csv") %>% janitor::clean_names()
soil_dat_sep =
soil_dat %>%
separate(sample, sep = "-", into = c("date", "area", "site")) %>%
separate(site, sep = "_", into = c("siterep", "soilhorizon")) %>%
mutate(soilhorizon = recode(soilhorizon, "0" = "O",
"01" = "O1",
"02" = "O2")) %>%
dplyr::mutate(plotnum = case_when(grepl("1", siterep)~"1",
grepl("2", siterep)~"2",
grepl("3", siterep)~"3")) %>%
mutate(siterep = recode(siterep, "02" = "D2")) %>%
dplyr::mutate(site = case_when(grepl("D", siterep)~"dry",
grepl("M", siterep)~"mesic",
grepl("H", siterep)~"hydric"))
soil_dat_sep =
soil_dat %>%
separate(sample, sep = "-", into = c("date", "area", "site")) %>%
separate(site, sep = "_", into = c("siterep", "soilhorizon")) %>%
mutate(soilhorizon = recode(soilhorizon, "0" = "O",
"01" = "O1",
"02" = "O2")) %>%
dplyr::mutate(plotnum = case_when(grepl("1", siterep)~"1",
grepl("2", siterep)~"2",
grepl("3", siterep)~"3")) %>%
mutate(siterep = recode(siterep, "02" = "D2")) %>%
dplyr::mutate(site = case_when(grepl("D", siterep)~"dry",
grepl("M", siterep)~"mesic",
grepl("H", siterep)~"hydric")) %>%
mutate(area = factor(area, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(site = factor(site, levels = c("dry", "mesic", "hydric")))
soil_dat_individual =
soil_dat_sep
soil_dat_individual %>% knitr::kable() # prints a somewhat clean table in the console
write.csv(soil_dat_individual, "output/soil_dat_individual.csv", row.names = FALSE)
soil_dat_sep =
soil_dat %>%
separate(sample, sep = "-", into = c("date", "area", "site")) %>%
separate(site, sep = "_", into = c("siterep", "soilhorizon")) %>%
mutate(soilhorizon = recode(soilhorizon, "0" = "O",
"01" = "O1",
"02" = "O2")) %>%
dplyr::mutate(plotnum = case_when(grepl("1", siterep)~"1",
grepl("2", siterep)~"2",
grepl("3", siterep)~"3")) %>%
mutate(siterep = recode(siterep, "02" = "D2")) %>%
dplyr::mutate(site = case_when(grepl("D", siterep)~"dry",
grepl("M", siterep)~"mesic",
grepl("H", siterep)~"hydric"))
soil_dat_sep =
soil_dat %>%
separate(sample, sep = "-", into = c("date", "area", "site")) %>%
separate(site, sep = "_", into = c("siterep", "soilhorizon")) %>%
mutate(soilhorizon = recode(soilhorizon, "0" = "O",
"01" = "O1",
"02" = "O2")) %>%
dplyr::mutate(plotnum = case_when(grepl("1", siterep)~"1",
grepl("2", siterep)~"2",
grepl("3", siterep)~"3")) %>%
mutate(siterep = recode(siterep, "02" = "D2")) %>%
dplyr::mutate(site = case_when(grepl("D", siterep)~"dry",
grepl("M", siterep)~"mesic",
grepl("H", siterep)~"hydric")) %>%
dplyr::mutate(site = case_when(grepl("E", siterep)~"acidic tundra",
grepl("W", siterep)~"non-acidic tundra")) %>%
mutate(area = factor(area, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(site = factor(site, levels = c("dry", "mesic", "hydric")))
soil_dat_individual =
soil_dat_sep
soil_dat_individual %>% knitr::kable() # prints a somewhat clean table in the console
write.csv(soil_dat_individual, "output/soil_dat_individual.csv", row.names = FALSE)
write.csv(soil_dat_individual, "output/soil_dat_individual.csv", row.names = FALSE)
soil_dat_sep =
soil_dat %>%
separate(sample, sep = "-", into = c("date", "area", "site")) %>%
separate(site, sep = "_", into = c("siterep", "soilhorizon")) %>%
mutate(soilhorizon = recode(soilhorizon, "0" = "O",
"01" = "O1",
"02" = "O2")) %>%
dplyr::mutate(plotnum = case_when(grepl("1", siterep)~"1",
grepl("2", siterep)~"2",
grepl("3", siterep)~"3")) %>%
mutate(siterep = recode(siterep, "02" = "D2")) %>%
dplyr::mutate(area = case_when(grepl("D", area)~"dry",
grepl("M", area)~"mesic",
grepl("H", area)~"hydric")) %>%
dplyr::mutate(site = case_when(grepl("E", siterep)~"acidic tundra",
grepl("W", siterep)~"non-acidic tundra")) %>%
mutate(area = factor(area, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(site = factor(site, levels = c("dry", "mesic", "hydric")))
soil_dat_sep =
soil_dat %>%
separate(sample, sep = "-", into = c("date", "area", "site")) %>%
separate(site, sep = "_", into = c("siterep", "soilhorizon")) %>%
mutate(soilhorizon = recode(soilhorizon, "0" = "O",
"01" = "O1",
"02" = "O2")) %>%
dplyr::mutate(plotnum = case_when(grepl("1", siterep)~"1",
grepl("2", siterep)~"2",
grepl("3", siterep)~"3")) %>%
mutate(siterep = recode(siterep, "02" = "D2")) %>%
dplyr::mutate(site = case_when(grepl("D", siterep)~"dry",
grepl("M", siterep)~"mesic",
grepl("H", siterep)~"hydric")) %>%
dplyr::mutate(area = case_when(grepl("E", area)~"acidic tundra",
grepl("W", area)~"non-acidic tundra")) %>%
mutate(area = factor(area, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(site = factor(site, levels = c("dry", "mesic", "hydric")))
soil_dat_individual =
soil_dat_sep
soil_dat_individual %>% knitr::kable() # prints a somewhat clean table in the console
write.csv(soil_dat_individual, "output/soil_dat_individual.csv", row.names = FALSE)
