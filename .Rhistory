# scale_fill_manual(values = c("#9a031e", "#a7c957", "#1e96fc"))+
ylim(60, 0)+
labs(
x = '
soil moisture, %
',
y = "depth (cm)",
color = "", fill = "")+
scale_x_continuous(position="top", breaks = c(0, 20, 40, 60), n.breaks=4, limits = c(0, 60))+
facet_grid(.~site, switch = "x")+
theme_er1()+
theme(legend.position = "none", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), panel.border = element_rect(color="gray50",size=0.25, fill = NA))
#
grouped_moisture %>%
filter(site == "acidic tundra") %>%
mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
ggplot(aes(y = depth_cm, x = moisture_avg, color = position, fill = position), group = 'position')+
geom_point(size = 3.75, shape = c(21))+
geom_line(orientation = "y", show.legend = FALSE, linetype="longdash", alpha = 0.3)+
geom_errorbar(aes(xmin=moisture_avg-moisture_sd, xmax=moisture_avg+moisture_sd), show.legend = FALSE, width = 1)+
# scale_color_manual(values = c("#bc4749", "#35a55f", "#0582ca"))+
# scale_fill_manual(values = c("#bc4749", "#35a55f", "#0582ca"))+
scale_color_manual(values = rev(soil_palette("redox2",3)))+
scale_fill_manual(values = rev(soil_palette("redox2",3)))+
# scale_color_manual(values = c("#9a031e", "#a7c957", "#1e96fc"))+
# scale_fill_manual(values = c("#9a031e", "#a7c957", "#1e96fc"))+
ylim(60, 0)+
labs(
x = '
soil moisture, %
',
y = "depth (cm)",
color = "", fill = "")+
scale_x_continuous(position="top", breaks = c(0, 20, 40, 60), n.breaks=4, limits = c(0, 60))+
facet_grid(.~site, switch = "x")+
theme_er1()+
theme(legend.position = "none", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), panel.border = element_rect(color="gray50",size=0.25, fill = NA))
#
final_temp_sal_moist_forfig =
final_temp_sal_moist %>%
mutate(forsep = TIMESTAMP) %>%
separate(TIMESTAMP, sep = " ", into = c("date2", "time")) %>%
separate(date2, sep = "/", into =c('month', 'day', 'year')) %>%
mutate(date = as.Date(paste(year, month, day, sep = "-"))) %>%
mutate(datetime = ymd_hm(paste(date, time)),
date = ymd(date)) %>%
separate(forsep, sep = " ", into = c("date", "time")) %>%
separate(date, sep = "/", into = c("month", "day", "year")) %>%
mutate(month = recode(month,  "6" = "June",
"7" = "July",
"8" = "August",
"9" = "September")) %>%
mutate(position = factor(position, levels = c("dry", "mesic", "hydric"))) %>%
mutate(site = recode(site, "east" = "acidic tundra",
"west" = "non-acidic tundra")) %>%
dplyr::rename(depth_cm = depth) %>%
na.omit() %>%
mutate(frozen = case_when(temp < 1 ~ "frozen", TRUE ~ "unfrozen"))
final_temp_sal_moist_forfig2022 =
final_temp_sal_moist2022 %>%
mutate(forsep = TIMESTAMP) %>%
separate(TIMESTAMP, sep = " ", into = c("date2", "time")) %>%
separate(date2, sep = "/", into =c('month', 'day', 'year')) %>%
mutate(date = as.Date(paste(year, month, day, sep = "-"))) %>%
mutate(datetime = ymd_hm(paste(date, time)),
date = ymd(date)) %>%
separate(forsep, sep = " ", into = c("date", "time")) %>%
separate(date, sep = "/", into = c("month", "day", "year")) %>%
mutate(month = recode(month,  "6" = "early summer",
"7" = "mid summer",
"8" = "late summer",
"9" = "early fall")) %>%
mutate(position = factor(position, levels = c("dry", "mesic", "hydric"))) %>%
mutate(site = recode(site, "east" = "acidic tundra",
"west" = "non-acidic tundra")) %>%
dplyr::rename(depth_cm = depth) %>%
na.omit() %>%
mutate(frozen = case_when(temp < 1 ~ "frozen", TRUE ~ "unfrozen"))
grouped_moisture_forfigs_temporal =
final_temp_sal_moist_forfig %>%
filter(moisture > 10) %>%
mutate(position = factor(position, levels = c("dry", "mesic", "hydric"))) %>%
mutate(site = recode(site, "east" = "acidic tundra",
"west" = "non-acidic tundra")) %>%
group_by(site, position, depth_cm, month) %>%
dplyr::summarise(moisture_avg = round(mean(moisture),2),
moisture_sd = round(sd(moisture),2),
moisture_se = round(sd(moisture)/sqrt(n()),2))
grouped_moisture_forfigs_temporal2022 =
final_temp_sal_moist_forfig2022 %>%
filter(moisture > 10) %>%
mutate(position = factor(position, levels = c("dry", "mesic", "hydric"))) %>%
mutate(site = recode(site, "east" = "acidic tundra",
"west" = "non-acidic tundra")) %>%
group_by(site, position, depth_cm, month) %>%
dplyr::summarise(moisture_avg = round(mean(moisture),2),
moisture_sd = round(sd(moisture),2),
moisture_se = round(sd(moisture)/sqrt(n()),2))
grouped_moisture2022 =
final_temp_sal_moist_forfig2022 %>%
filter(moisture > 10) %>%
mutate(position = factor(position, levels = c("dry", "mesic", "hydric"))) %>%
mutate(site = recode(site, "east" = "acidic tundra",
"west" = "non-acidic tundra")) %>%
group_by(site, position, depth_cm) %>%
dplyr::summarise(moisture_avg = round(mean(moisture),2),
moisture_sd = round(sd(moisture),2),
moisture_se = round(sd(moisture)/sqrt(n()),2))
grouped_moisture =
final_temp_sal_moist_forfig %>%
filter(moisture > 10) %>%
mutate(position = factor(position, levels = c("dry", "mesic", "hydric"))) %>%
mutate(site = recode(site, "east" = "acidic tundra",
"west" = "non-acidic tundra")) %>%
group_by(site, position, depth_cm) %>%
dplyr::summarise(moisture_avg = round(mean(moisture),2),
moisture_sd = round(sd(moisture),2),
moisture_se = round(sd(moisture)/sqrt(n()),2))
grouped_moisture %>%
filter(site == "non-acidic tundra") %>%
mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
ggplot(aes(y = depth_cm, x = moisture_avg, color = position, fill = position), group = 'position')+
geom_point(size = 3.75, shape = c(21))+
geom_line(orientation = "y", show.legend = FALSE, linetype="longdash", alpha = 0.3)+
geom_errorbar(aes(xmin=moisture_avg-moisture_sd, xmax=moisture_avg+moisture_sd), show.legend = FALSE, width = 1)+
# scale_color_manual(values = c("#bc4749", "#35a55f", "#0582ca"))+
# scale_fill_manual(values = c("#bc4749", "#35a55f", "#0582ca"))+
scale_color_manual(values = rev(soil_palette("redox2",3)))+
scale_fill_manual(values = rev(soil_palette("redox2",3)))+
# scale_color_manual(values = c("#9a031e", "#a7c957", "#1e96fc"))+
# scale_fill_manual(values = c("#9a031e", "#a7c957", "#1e96fc"))+
ylim(60, 0)+
labs(
x = '
soil moisture, %
',
y = "depth (cm)",
color = "", fill = "")+
scale_x_continuous(position="top", breaks = c(0, 20, 40, 60), n.breaks=4, limits = c(0, 60))+
facet_grid(.~site, switch = "x")+
theme_er1()+
theme(legend.position = "none", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), panel.border = element_rect(color="gray50",size=0.25, fill = NA))
#
grouped_moisture %>%
filter(site == "acidic tundra") %>%
mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
ggplot(aes(y = depth_cm, x = moisture_avg, color = position, fill = position), group = 'position')+
geom_point(size = 3.75, shape = c(21))+
geom_line(orientation = "y", show.legend = FALSE, linetype="longdash", alpha = 0.3)+
geom_errorbar(aes(xmin=moisture_avg-moisture_sd, xmax=moisture_avg+moisture_sd), show.legend = FALSE, width = 1)+
# scale_color_manual(values = c("#bc4749", "#35a55f", "#0582ca"))+
# scale_fill_manual(values = c("#bc4749", "#35a55f", "#0582ca"))+
scale_color_manual(values = rev(soil_palette("redox2",3)))+
scale_fill_manual(values = rev(soil_palette("redox2",3)))+
# scale_color_manual(values = c("#9a031e", "#a7c957", "#1e96fc"))+
# scale_fill_manual(values = c("#9a031e", "#a7c957", "#1e96fc"))+
ylim(60, 0)+
labs(
x = '
soil moisture, %
',
y = "depth (cm)",
color = "", fill = "")+
scale_x_continuous(position="top", breaks = c(0, 20, 40, 60), n.breaks=4, limits = c(0, 60))+
facet_grid(.~site, switch = "x")+
theme_er1()+
theme(legend.position = "none", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), panel.border = element_rect(color="gray50",size=0.25, fill = NA))
#
acidic_moisture_fig =
grouped_moisture %>%
filter(site == "acidic tundra") %>%
mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
ggplot(aes(y = depth_cm, x = moisture_avg, color = position, fill = position), group = 'position')+
geom_point(size = 3.75, shape = c(21))+
geom_line(orientation = "y", show.legend = FALSE, linetype="longdash", alpha = 0.3)+
geom_errorbar(aes(xmin=moisture_avg-moisture_sd, xmax=moisture_avg+moisture_sd), show.legend = FALSE, width = 1)+
# scale_color_manual(values = c("#bc4749", "#35a55f", "#0582ca"))+
# scale_fill_manual(values = c("#bc4749", "#35a55f", "#0582ca"))+
scale_color_manual(values = rev(soil_palette("redox2",3)))+
scale_fill_manual(values = rev(soil_palette("redox2",3)))+
# scale_color_manual(values = c("#9a031e", "#a7c957", "#1e96fc"))+
# scale_fill_manual(values = c("#9a031e", "#a7c957", "#1e96fc"))+
ylim(60, 0)+
labs(
x = '
soil moisture, %
',
y = "depth (cm)",
color = "", fill = "")+
scale_x_continuous(position="top", breaks = c(0, 20, 40, 60), n.breaks=4, limits = c(0, 60))+
facet_grid(.~site, switch = "x")+
theme_er1()+
theme(legend.position = "none", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), panel.border = element_rect(color="gray50",size=0.25, fill = NA))
ggsave("formanuscript/moisturefig_depth_sd2021_acidic.png", plot = acidic_moisture_fig, height = 4.5, width = 2.25)
grouped_moisture_forfigs_temporal %>%
mutate(month = factor(month, levels = c("June", "July", "August", "September")))   %>%
mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
ggplot(aes(y = depth_cm, x = moisture_avg, color = month, fill = month), group = 'month')+
geom_point(size = 4, alpha = 0.8, shape = c(21))+
geom_line(orientation = "y", show.legend = FALSE, linetype = "longdash")+
geom_errorbar(aes(xmin=moisture_avg-moisture_sd, xmax=moisture_avg+moisture_sd), show.legend = FALSE, width = 2)+
scale_color_manual(values = (pnw_palette('Sunset2', 4)))+
scale_fill_manual(values = (pnw_palette('Sunset2', 4)))+
# scale_color_manual(values = rev(c("#f94144", "#f8961e", "#57cc99", "#4361ee")))+
# scale_fill_manual(values = rev(c("#f94144", "#f8961e", "#57cc99", "#4361ee")))+
ylim(60, 0)+
labs(x = '2021
soil moisture (%)',
y = "depth (cm)",
color = "", fill = "")+
scale_x_continuous(position="top", breaks = c(0, 10, 20, 30, 40, 50, 60), n.breaks = 7, limits = c(0, 60))+
facet_grid(position~site, switch = "x")+
theme_er1()+
theme(legend.position = "none",
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(),
strip.placement = "outside",
strip.text.y = element_blank(),
axis.text.x = element_text(size = 7.5, hjust=0.8,vjust=0.2,angle = 90))  #remove y axis ticks
grouped_moisture_forfigs_temporal %>%
filter(site == "non-acidic tundra" & position == "hydric") %>%
mutate(month = factor(month, levels = c("June", "July", "August", "September")))   %>%
mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
ggplot(aes(y = depth_cm, x = moisture_avg, color = month, fill = month), group = 'month')+
geom_point(size = 3.75, alpha = 0.8, shape = c(21))+
geom_line(orientation = "y", show.legend = FALSE, linetype = "longdash", alpha = 0.3)+
geom_errorbar(aes(xmin=moisture_avg-moisture_sd, xmax=moisture_avg+moisture_sd), show.legend = FALSE,
width=2,
size=0.5)+
scale_color_manual(values = (pnw_palette('Sunset2', 4)))+
scale_fill_manual(values = (pnw_palette('Sunset2', 4)))+
# scale_color_manual(values = rev(c("#f94144", "#f8961e", "#57cc99", "#4361ee")))+
# scale_fill_manual(values = rev(c("#f94144", "#f8961e", "#57cc99", "#4361ee")))+
ylim(60, 0)+
labs(x = 'Hydric
soil moisture (%)
',
y = "depth (cm)",
color = "", fill = "")+
scale_x_continuous(position="top", breaks = c(0, 20, 40, 60), n.breaks=4, limits = c(0, 60))+
facet_grid(position~site, switch = "x")+
theme_er1()+
theme(legend.position = "none",
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(),
strip.placement = "outside",
strip.text.y = element_blank(), panel.border = element_rect(color="gray",size=0.25, fill = NA))
#axis.text.x = element_text(size = 12, hjust=0.8,vjust=0.2,angle = 90))  #remove y axis ticks
grouped_moisture_forfigs_temporal2022 %>%
filter(moisture_avg > 10) %>%
mutate(month = factor(month, levels = c("early summer", "mid summer", "late summer", "early fall")))   %>%
mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra"))) %>%
ggplot(aes(y = depth_cm, x = moisture_avg, color = month, fill = month), group = 'month')+
geom_point(size = 4, alpha = 0.8, shape = c(21))+
geom_line(orientation = "y", show.legend = FALSE, linetype = "longdash")+
geom_errorbar(aes(xmin=moisture_avg-moisture_sd, xmax=moisture_avg+moisture_sd), show.legend = FALSE, width = 2)+
scale_color_manual(values = (pnw_palette('Sunset2', 4)))+
scale_fill_manual(values = (pnw_palette('Sunset2', 4)))+
# scale_color_manual(values = rev(c("#f94144", "#f8961e", "#57cc99", "#4361ee")))+
# scale_fill_manual(values = rev(c("#f94144", "#f8961e", "#57cc99", "#4361ee")))+
ylim(60, 0)+
labs(x = '2022
soil moisture (%)',
y = "depth (cm)",
color = "", fill = "")+
scale_x_continuous(position="top", breaks = c(0, 10, 20, 30, 40, 50, 60), n.breaks = 7, limits = c(0, 60))+
facet_grid(position~site, switch = "x")+
theme_er1()+
theme(legend.position = "none",
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(),
strip.placement = "outside",
strip.text.y = element_blank(),
axis.text.x = element_text(size = 7.5, hjust=0.8,vjust=0.2,angle = 90))  #remove y axis ticks
source("code/0-packages.R")
anions_dat = read.csv("raw/PhIr2022_porwater_IC anions_master_ev.csv") %>%
janitor::clean_names() %>%
mutate(area = recode(area, "East" = "acidic tundra",
"West" = "non-acidic tundra")) %>%
mutate(area = factor(area, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(site = factor(site, levels = c("Dry", "Mesic", "Hydric")))
nitrate_summary =
anions_dat %>%
dplyr::select(c(area, site, depth_cm, no3n_ppm)) %>%
na.omit() %>%
group_by(area, site, depth_cm) %>%
dplyr::summarize(mean_no3n_ppm = round(mean(no3n_ppm), 3),
sd_no3n_ppm = round(sd(no3n_ppm), 2))
phosphate_summary =
anions_dat %>%
dplyr::select(c(area, site, depth_cm, po4_p_ppm)) %>%
na.omit() %>%
group_by(area, site, depth_cm) %>%
dplyr::summarize(mean_po4_p_ppm = round(mean(po4_p_ppm), 3),
sd_po4_p_ppm = round(sd(po4_p_ppm), 2))
nitrate_fig =
nitrate_summary %>%
ggplot()+
geom_point(aes(x = mean_no3n_ppm, y = depth_cm, color = area, shape = area), size = 2.5)+
geom_line(aes(x = mean_no3n_ppm, y = depth_cm, color = area, group = area), orientation = "y", size = 1)+
geom_ribbon(aes(xmin = mean_no3n_ppm-sd_no3n_ppm, xmax = mean_no3n_ppm+sd_no3n_ppm,
y = depth_cm, fill = area, color = area, group = area), alpha = 0.4, size = 0.2)+
scale_color_manual(values = c("#5aaa95", "#bb9f06"))+
scale_fill_manual(values = c("#5aaa95", "#bb9f06"))+
scale_y_reverse()+
scale_x_continuous(position="bottom", breaks = c(0, 0.5, 1.0, 1.5), n.breaks=4, limits = c(-0.2, 1.7))+
labs(x = "Nitrate-N (ppm)",
y = "Depth (cm)",
color = " ",
fill = " ")+
facet_grid(site ~ .)+
guides(color = guide_legend(nrow = 2))+
theme_er1()+
theme(legend.position = "bottom", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), panel.border = element_rect(color="gray",size=0.25, fill = NA),
strip.text.y = element_blank(), axis.title.y = element_blank(), axis.ticks.y = element_blank(), axis.text.y = element_blank())
nitrate_fig2 =
nitrate_summary %>%
ggplot()+
geom_point(aes(x = mean_no3n_ppm, y = depth_cm, color = area, shape = area), size = 2)+
geom_line(aes(x = mean_no3n_ppm, y = depth_cm, color = area, group = area), orientation = "y", size = 0.5)+
geom_errorbar(aes(xmin = mean_no3n_ppm-sd_no3n_ppm, xmax = mean_no3n_ppm+sd_no3n_ppm,
y = depth_cm, fill = area, color = area), alpha = 0.5, width = 1)+
scale_color_manual(values = c("#5aaa95", "#bb9f06"))+
scale_fill_manual(values = c("#5aaa95", "#bb9f06"))+
scale_y_reverse()+
scale_x_continuous(position="bottom", breaks = c(0, 0.5, 1.0, 1.5), n.breaks=4, limits = c(-0.2, 1.7))+
labs(x = "Nitrate-N (ppm)",
y = "Depth (cm)",
color = " ",
fill = " ")+
facet_grid(site ~ .)+
guides(color = guide_legend(nrow = 2))+
theme_er1()+
theme(legend.position = "bottom", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), panel.border = element_rect(color="gray",size=0.25, fill = NA),
strip.text.y = element_blank(), axis.title.y = element_blank(), axis.ticks.y = element_blank(), axis.text.y = element_blank())
phosphate_summary %>%
ggplot()+
# geom_line(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, group = area), orientation = "y", size = 1)+
# geom_ribbon(aes(xmin = mean_po4_p_ppm-sd_po4_p_ppm, xmax = mean_po4_p_ppm+sd_po4_p_ppm,
#                 y = depth_cm, fill = area, color = area, group = area), alpha = 0.4, size = 0.2)+
# geom_point(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, shape = area), size = 2)+
geom_line(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, group = area), orientation = "y", size = 0.5)+
geom_errorbar(aes(xmin = mean_po4_p_ppm-sd_po4_p_ppm, xmax = mean_po4_p_ppm+sd_po4_p_ppm,
y = depth_cm, fill = area, color = area), alpha = 0.5, width = 1)+
scale_color_manual(values = c("#5aaa95", "#bb9f06"))+
scale_fill_manual(values = c("#5aaa95", "#bb9f06"))+
scale_y_reverse()+
#scale_x_continuous(position="bottom", breaks = c(0, 0.5, 1.0, 1.5), n.breaks=4, limits = c(-0.2, 1.7))+
labs(x = "Phosphate (ppm)",
y = "Depth (cm)",
color = " ",
fill = " ")+
facet_grid(site ~ .)+
guides(color = guide_legend(nrow = 2))+
theme_er1()+
theme(legend.position = "bottom", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), panel.border = element_rect(color="gray",size=0.25, fill = NA),
strip.text.y = element_blank(), axis.title.y = element_blank(), axis.ticks.y = element_blank(), axis.text.y = element_blank())
phosphate_fig =
phosphate_summary %>%
ggplot()+
# geom_line(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, group = area), orientation = "y", size = 1)+
# geom_ribbon(aes(xmin = mean_po4_p_ppm-sd_po4_p_ppm, xmax = mean_po4_p_ppm+sd_po4_p_ppm,
#                 y = depth_cm, fill = area, color = area, group = area), alpha = 0.4, size = 0.2)+
# geom_point(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, shape = area), size = 2)+
geom_line(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, group = area), orientation = "y", size = 0.5)+
geom_errorbar(aes(xmin = mean_po4_p_ppm-sd_po4_p_ppm, xmax = mean_po4_p_ppm+sd_po4_p_ppm,
y = depth_cm, fill = area, color = area), alpha = 0.5, width = 1)+
scale_color_manual(values = c("#5aaa95", "#bb9f06"))+
scale_fill_manual(values = c("#5aaa95", "#bb9f06"))+
scale_y_reverse()+
#scale_x_continuous(position="bottom", breaks = c(0, 0.5, 1.0, 1.5), n.breaks=4, limits = c(-0.2, 1.7))+
labs(x = "Phosphate (ppm)",
y = "Depth (cm)",
color = " ",
fill = " ")+
facet_grid(site ~ .)+
guides(color = guide_legend(nrow = 2))+
theme_er1()+
theme(legend.position = "bottom", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), panel.border = element_rect(color="gray",size=0.25, fill = NA),
strip.text.y = element_blank(), axis.title.y = element_blank(), axis.ticks.y = element_blank(), axis.text.y = element_blank())
ggsave("output/phosphate_line_fig.png", plot = phosphate_fig, height = 8, width = 1.5)
phosphate_fig =
phosphate_summary %>%
ggplot()+
# geom_line(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, group = area), orientation = "y", size = 1)+
# geom_ribbon(aes(xmin = mean_po4_p_ppm-sd_po4_p_ppm, xmax = mean_po4_p_ppm+sd_po4_p_ppm,
#                 y = depth_cm, fill = area, color = area, group = area), alpha = 0.4, size = 0.2)+
# geom_point(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, shape = area), size = 2)+
geom_line(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, group = area), orientation = "y", size = 0.5)+
geom_errorbar(aes(xmin = mean_po4_p_ppm-sd_po4_p_ppm, xmax = mean_po4_p_ppm+sd_po4_p_ppm,
y = depth_cm, fill = area, color = area), alpha = 0.5, width = 1)+
scale_color_manual(values = c("#5aaa95", "#bb9f06"))+
scale_fill_manual(values = c("#5aaa95", "#bb9f06"))+
scale_y_reverse()+
scale_x_continuous(position="bottom", breaks = c(0, 0.001), n.breaks=2, limits = c(0, 0.0011))+
labs(x = "Phosphate (ppm)",
y = "Depth (cm)",
color = " ",
fill = " ")+
facet_grid(site ~ .)+
guides(color = guide_legend(nrow = 2))+
theme_er1()+
theme(legend.position = "bottom", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), panel.border = element_rect(color="gray",size=0.25, fill = NA))
ggsave("output/phosphate_line_fig.png", plot = phosphate_fig, height = 8, width = 1.5)
phosphate_fig =
phosphate_summary %>%
ggplot()+
# geom_line(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, group = area), orientation = "y", size = 1)+
# geom_ribbon(aes(xmin = mean_po4_p_ppm-sd_po4_p_ppm, xmax = mean_po4_p_ppm+sd_po4_p_ppm,
#                 y = depth_cm, fill = area, color = area, group = area), alpha = 0.4, size = 0.2)+
# geom_point(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, shape = area), size = 2)+
geom_line(aes(x = mean_po4_p_ppm, y = depth_cm, color = area, group = area), orientation = "y", size = 0.5)+
geom_errorbar(aes(xmin = mean_po4_p_ppm-sd_po4_p_ppm, xmax = mean_po4_p_ppm+sd_po4_p_ppm,
y = depth_cm, fill = area, color = area), alpha = 0.5, width = 1)+
scale_color_manual(values = c("#5aaa95", "#bb9f06"))+
scale_fill_manual(values = c("#5aaa95", "#bb9f06"))+
scale_y_reverse()+
scale_x_continuous(position="bottom", breaks = c(0, 0.001), n.breaks=2, limits = c(0, 0.0011))+
labs(x = "Phosphate (ppm)",
y = "Depth (cm)",
color = " ",
fill = " ")+
facet_grid(site ~ .)+
guides(color = guide_legend(nrow = 2))+
theme_er1()+
theme(legend.position = "bottom", panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), panel.border = element_rect(color="gray",size=0.25, fill = NA))
ggsave("output/phosphate_line_fig.png", plot = phosphate_fig, height = 8, width = 1.5)
ggsave("output/phosphate_line_fig.png", plot = phosphate_fig, height = 8, width = 2.5)
knitr::opts_chunk$set(echo = TRUE)
source("code/0-packages.R")
combo_redox_withdepths_2022 = read.csv("processed/2022all_combine_temporary.csv")
combo_redox_withdepths_2021 = read.csv("processed/all_combine_temporary.csv")
source("code/0-packages.R")
combo_redox_withdepths2022 = read.csv("processed/allcombine_2022_frozen.csv")
combo_redox_withdepths2021 = read.csv("processed/allcombine_2021_frozen.csv")
all_redox_data_fordatabase =
combo_redox_withdepths2021 %>%
dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen) %>%
rbind(combo_redox_withdepths2022 %>% dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen))
View(all_redox_data_fordatabase)
all_redox_data_fordatabase =
combo_redox_withdepths2021 %>%
dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen) %>%
rbind(combo_redox_withdepths2022 %>% dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen)) %>%
rename(redox_mV = avg_values_fixed)
all_redox_data_fordatabase =
combo_redox_withdepths2021 %>%
dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen) %>%
rbind(combo_redox_withdepths2022 %>% dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen)) %>%
rename(redox_mV = avg_values_fixed,
area = site,
site = position)
all_redox_data_fordatabase =
combo_redox_withdepths2021 %>%
dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen) %>%
rbind(combo_redox_withdepths2022 %>% dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen)) %>%
rename(redox_mV = avg_values_fixed,
area = site,
site = position,
sensor_frozen = frozen)
all_redox_data_fordatabase =
combo_redox_withdepths2021 %>%
dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen) %>%
rbind(combo_redox_withdepths2022 %>% dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen)) %>%
rename(redox_mV = avg_values_fixed,
area = site,
site = position,
status = frozen)
all_redox_data_fordatabase =
combo_redox_withdepths2021 %>%
dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen) %>%
rbind(combo_redox_withdepths2022 %>% dplyr::select(TIMESTAMP, site, position, avg_values_fixed, Plot, depth_cm, frozen)) %>%
rename(redox_mV = avg_values_fixed,
area = site,
site = position,
condition = frozen)
write.csv(all_redox_data_fordatabase, "processed/PhIr_redox_2021_2022.csv")
final_temp_sal_moist = read.csv("processed/final_temp_salinity_avgs.csv")
final_temp_sal_moist2022 = read.csv("processed/2022final_temp_salinity_avgs.csv")
all_moisturetemp_data_fordatabase =
final_temp_sal_moist %>%
dplyr::select(TIMESTAMP, site, position, moisture, temp, salinity, n, depth_cm) %>%
rbind(final_temp_sal_moist2022 %>% dplyr::select(TIMESTAMP, site, position, moisture, temp, salinity, n, depth_cm)) %>%
rename(area = site,
site = position)
all_moisturetemp_data_fordatabase =
final_temp_sal_moist %>%
dplyr::select(TIMESTAMP, site, position, moisture, temp, salinity, n, depth) %>%
rbind(final_temp_sal_moist2022 %>% dplyr::select(TIMESTAMP, site, position, moisture, temp, salinity, n, depth)) %>%
rename(area = site,
site = position,
depth_cm = depth)
View(all_moisturetemp_data_fordatabase)
all_moisturetemp_data_fordatabase =
final_temp_sal_moist %>%
dplyr::select(TIMESTAMP, site, position, moisture, temp, salinity, depth) %>%
rbind(final_temp_sal_moist2022 %>% dplyr::select(TIMESTAMP, site, position, moisture, temp, salinity, depth)) %>%
rename(area = site,
site = position,
depth_cm = depth)
write.csv(all_moisturetemp_data_fordatabase, "processed/PhIr_moisture_temp_salinity_2021_2022.csv")
