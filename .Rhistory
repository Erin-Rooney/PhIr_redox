mutate(position = factor(position, levels = c("dry", "mesic", "hydric"))) %>%
na.omit() %>%
ggplot(aes(xmin = (as.Date(Betterdate))-0.4, xmax = (as.Date(Betterdate))+0.4, ymin = depth_start_cm, ymax = depth_stop_cm, fill = salinity))+
geom_rect()+
labs(y = "depth, cm",
fill = "salinity, uS")+
scale_x_date(date_breaks = "1 week" , date_labels = "%Y-%m-%d")+
ylim(30, 0)+
scale_fill_gradientn(colors = PNWColors::pnw_palette("Shuksan2"))+
theme_er1()+
theme(axis.text.x = element_text (vjust = 0.5, hjust=1, angle = 90), legend.position = "bottom")+
facet_grid(position~site)
ggsave("output/moisture.tiff", plot = moisture_fig, height = 6, width = 8)
ggsave("output/temperature.tiff", plot = temp_fig, height = 6, width = 8)
ggsave("output/salinity.tiff", plot = sal_fig, height = 6, width = 8)
ggsave("output/redox.tiff", plot = redox_fig, height = 6, width = 8)
July_dailypeaktemps %>%
filter(type == "temp_avg" & depth < 10) %>%
ggplot(aes(x = day, y = value))+
geom_point()+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
facet_grid(month_name~.)+
theme_er1()
July_dailypeaktemps %>%
filter(type == "temp_avg" & depth < 10) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos))+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
facet_grid(month_name~.)+
theme_er1()
July_dailypeaktemps %>%
filter(type == "temp_avg" & depth < 10) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos))+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
facet_grid(month_name~.)+
theme_er1()
July_dailypeaktemps %>%
filter(type == "temp_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos))+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
facet_grid(month_name~.)+
theme_er1()
July_dailypeaktemps %>%
filter(type == "temp_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
#geom_point(aes(color = site_pos))+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
facet_grid(month_name~.)+
theme_er1()
July_dailypeaktemps %>%
filter(type == "temp_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos))+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
facet_grid(month_name~.)+
theme_er1()
July_dailypeaktemps %>%
filter(type == "temp_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.8)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
facet_grid(month_name~.)+
theme_er1()
July_dailypeaktemps %>%
filter(type == "temp_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
facet_grid(month_name~.)+
theme_er1()
July_dailypeaktemps %>%
filter(type == "temp_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
facet_wrap(month_name~.)+
theme_er1()
July_dailypeaktemps %>%
filter(type == "temp_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
facet_wrap(month_name~.)+
theme_er1()+
theme(axis.text.x = element_text (size = 10 , vjust = 0.5, hjust=1, angle = 90))
July_dailypeaktemps %>%
filter(type == "temp_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
scale_x_discrete(guide = waiver())+
facet_wrap(month_name~.)+
theme_er1()+
theme(axis.text.x = element_text (size = 10 , vjust = 0.5, hjust=1, angle = 90))
scale_x_discrete(breaks=c("1","15","31")+
July_dailypeaktemps %>%
filter(type == "temp_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
scale_x_discrete(breaks=c("1","15","31"))+
facet_wrap(month_name~.)+
theme_er1()+
theme(axis.text.x = element_text (size = 10 , vjust = 0.5, hjust=1, angle = 90))
July_dailypeaktemps %>%
filter(type == "temp_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
scale_x_discrete(breaks=c("1","15","31"))+
facet_wrap(month_name~.)+
theme_er1()+
theme(axis.text.x = element_text (size = 10 , vjust = 0.5, hjust=1, angle = 90))
July_dailypeaktemps %>%
filter(type == "temp_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
scale_x_discrete(breaks=c("1","15","31"))+
facet_wrap(month_name~.)+
theme_er1()+
theme(axis.text.x = element_text (size = 10 , vjust = 0.5, hjust=1, angle = 90))
July_dailypeaktemps %>%
filter(type == "temp_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
scale_x_discrete(breaks=c("1","5","10", "15", "20", "25", "30"))+
facet_wrap(month_name~.)+
theme_er1()+
theme(axis.text.x = element_text (size = 10 , vjust = 0.5, hjust=1, angle = 90))
July_dailypeaktemps %>%
filter(type == "temp_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
scale_x_discrete(breaks=c(1, 5, 10, 15, 20, 25, 30))+
facet_wrap(month_name~.)+
theme_er1()+
theme(axis.text.x = element_text (size = 10 , vjust = 0.5, hjust=1, angle = 90))
July_dailypeaktemps %>%
filter(type == "temp_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
scale_x_discrete(limits = c(0,31),
breaks = seq(0,31,2))+
facet_wrap(month_name~.)+
theme_er1()+
theme(axis.text.x = element_text (size = 10 , vjust = 0.5, hjust=1, angle = 90))
July_dailypeaktemps %>%
filter(type == "temp_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
scale_x_discrete(breaks = seq(0,31,2))+
facet_wrap(month_name~.)+
theme_er1()+
theme(axis.text.x = element_text (size = 10 , vjust = 0.5, hjust=1, angle = 90))
July_dailypeaktemps %>%
filter(type == "temp_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
scale_x_discrete(breaks = seq(-1,31,2))+
facet_wrap(month_name~.)+
theme_er1()+
theme(axis.text.x = element_text (size = 10 , vjust = 0.5, hjust=1, angle = 90))
July_dailypeaktemps %>%
filter(type == "temp_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
#scale_x_discrete(breaks = seq(-1,31,2))+
facet_wrap(month_name~.)+
theme_er1()+
theme(axis.text.x = element_text (size = 10 , vjust = 0.5, hjust=1, angle = 90))
twentyfivecm_dailypeaktemps =
final_temp_sal_moist_dailynumbers %>%
dplyr::select(-temp_se, -moisture_se, -salinity_se) %>%
pivot_longer(-c('site_pos', 'month_name', 'day', 'depth'), names_to = "type", values_to = "value")
twentyfivecm_dailypeaktemps %>%
filter(type == "temp_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
#scale_x_discrete(breaks = seq(-1,31,2))+
facet_wrap(month_name~.)+
theme_er1()+
theme(axis.text.x = element_text (size = 10 , vjust = 0.5, hjust=1, angle = 90))
temp_point =
twentyfivecm_dailypeaktemps %>%
filter(type == "temp_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
#scale_x_discrete(breaks = seq(-1,31,2))+
facet_wrap(month_name~.)+
theme_er1()+
theme(axis.text.x = element_text (size = 10 , vjust = 0.5, hjust=1, angle = 90))
twentyfivecm_dailypeaktemps %>%
filter(type == "moisture_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
#scale_x_discrete(breaks = seq(-1,31,2))+
facet_wrap(month_name~.)+
theme_er1()+
theme(axis.text.x = element_text (size = 10 , vjust = 0.5, hjust=1, angle = 90))
twentyfivecm_dailypeaktemps %>%
filter(type == "moisture_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
labs(y = "moisture %")+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
#scale_x_discrete(breaks = seq(-1,31,2))+
facet_wrap(month_name~.)+
theme_er1()+
theme(axis.text.x = element_text (size = 10 , vjust = 0.5, hjust=1, angle = 90))
moisture_point =
twentyfivecm_dailypeaktemps %>%
filter(type == "moisture_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
labs(y = "moisture %")+
#scale_x_discrete(breaks = seq(-1,31,2))+
facet_wrap(month_name~.)+
theme_er1()+
theme(axis.text.x = element_text (size = 10 , vjust = 0.5, hjust=1, angle = 90))
temp_point =
twentyfivecm_dailypeaktemps %>%
filter(type == "temp_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
#scale_x_discrete(breaks = seq(-1,31,2))+
labs(y = "temperature, C")+
facet_wrap(month_name~.)+
theme_er1()+
theme(axis.text.x = element_text (size = 10 , vjust = 0.5, hjust=1, angle = 90))
moisture_point =
twentyfivecm_dailypeaktemps %>%
filter(type == "moisture_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
labs(y = "moisture %")+
#scale_x_discrete(breaks = seq(-1,31,2))+
facet_wrap(month_name~.)+
theme_er1()+
theme(axis.text.x = element_text (size = 10 , vjust = 0.5, hjust=1, angle = 90))
twentyfivecm_dailypeaktemps %>%
filter(type == "salinity_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
labs(y = "salinity, uS/cm")+
#scale_x_discrete(breaks = seq(-1,31,2))+
facet_wrap(month_name~.)+
theme_er1()+
theme(axis.text.x = element_text (size = 10 , vjust = 0.5, hjust=1, angle = 90))
salinity_point =
twentyfivecm_dailypeaktemps %>%
filter(type == "salinity_avg" & depth > 20) %>%
ggplot(aes(x = day, y = value))+
geom_point(aes(color = site_pos), alpha = 0.5)+
geom_line(aes(group = site_pos, color = site_pos, orientation = "x"))+
scale_color_manual(values = natparks.pals(name = "KingsCanyon", 6))+
labs(y = "salinity, uS/cm")+
#scale_x_discrete(breaks = seq(-1,31,2))+
facet_wrap(month_name~.)+
theme_er1()+
theme(axis.text.x = element_text (size = 10 , vjust = 0.5, hjust=1, angle = 90))
ggsave(plot = temp_point, "output/temp_25.tiff", width = 8.5, height = 5.5)
ggsave(plot = moisture_point, "output/moisture_25.tiff", width = 8.5, height = 5.5)
ggsave(plot = salinity_point, "output/salinity_25.tiff", width = 8.5, height = 5.5)
source("code/0-packages.R")
westhydric_dlname = read.csv("processed/westhydric_dlname.csv")
easthydric_dlname = read.csv("processed/easthydric_dlname.csv")
westmesic_dlname = read.csv("processed/westmesic_dlname.csv")
eastmesic_dlname = read.csv("processed/eastmesic_dlname.csv")
westdry_dlname = read.csv("processed/westdry_dlname.csv")
eastdry_dlname = read.csv("processed/eastdry_dlname.csv")
westhydric_metadata = read.csv("processed/westhydric_metadata.csv")
easthydric_metadata = read.csv("processed/easthydric_metadata.csv")
westmesic_metadata = read.csv("processed/westmesic_metadata.csv")
eastmesic_metadata = read.csv("processed/eastmesic_metadata.csv")
westdry_metadata = read.csv("processed/westdry_metadata.csv")
eastdry_metadata = read.csv("processed/eastdry_metadata.csv")
avg_separate <- function(dat){
dat %>%
mutate(redox_NUM_Avg = X) %>%
dplyr::select(-X) %>%
# dplyr::select(c('X') &
dplyr::select(starts_with('redox')) %>%
dplyr::select(ends_with('Avg')) %>%
#if needed, get rid of NA rows then columns. Not needed.
# filter(redox_NUM_Avg < 5989) %>%
# select_if(~ !any(is.na(.))) %>%
force()
}
westhydric_avg =
avg_separate(westhydric_dlname) %>%
left_join(westhydric_metadata, by = 'redox_NUM_Avg') %>%
pivot_longer(-c("redox_NUM_Avg", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = "redox_avg", values_to = "avg_values") %>%
filter(avg_values < 1000) %>%
filter(avg_values > -600)
westmesic_avg =
avg_separate(westmesic_dlname) %>%
left_join(westmesic_metadata, by = 'redox_NUM_Avg') %>%
pivot_longer(-c("redox_NUM_Avg", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = "redox_avg", values_to = "avg_values") %>%
filter(avg_values < 1000) %>%
filter(avg_values > -600)
westdry_avg =
avg_separate(westdry_dlname) %>%
left_join(westdry_metadata, by = 'redox_NUM_Avg') %>%
pivot_longer(-c("redox_NUM_Avg", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = "redox_avg", values_to = "avg_values") %>%
filter(avg_values < 1000) %>%
filter(avg_values > -600)
easthydric_avg =
avg_separate(easthydric_dlname) %>%
left_join(easthydric_metadata, by = 'redox_NUM_Avg') %>%
pivot_longer(-c("redox_NUM_Avg", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = "redox_avg", values_to = "avg_values") %>%
filter(avg_values < 1000) %>%
filter(avg_values > -600)
eastmesic_avg =
avg_separate(eastmesic_dlname) %>%
left_join(eastmesic_metadata, by = 'redox_NUM_Avg') %>%
pivot_longer(-c("redox_NUM_Avg", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = "redox_avg", values_to = "avg_values") %>%
filter(avg_values < 1000) %>%
filter(avg_values > -600)
eastdry_avg =
avg_separate(eastdry_dlname) %>%
left_join(eastdry_metadata, by = 'redox_NUM_Avg') %>%
pivot_longer(-c("redox_NUM_Avg", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = "redox_avg", values_to = "avg_values") %>%
filter(avg_values < 1000) %>%
filter(avg_values > -600)
sensor_depths_prename = read.csv("raw/datalogger_depths.csv")
sensor_depths =
sensor_depths_prename %>%
dplyr::rename(position = Site,
site = Area) %>%
mutate(site = recode(site, "West" = "west",
"East" = "east")) %>%
mutate(position = recode(position, "Hydric" = "hydric",
"Mesic" = "mesic",
"Dry" = "dry"),
Sensor = recode(Sensor, "redox_5-2-3_fromtip_Avg" = "redox_5_2-3_fromtip_Avg")) %>%
mutate(Sensor = str_remove(Sensor, "Redox_")) %>%
mutate(Sensor = str_remove(Sensor, "redox_")) %>%
mutate(Sensor = str_remove(Sensor, "_fromtip_Avg")) %>%
separate(Sensor, sep = "_", into = c("datalogger", "probe_sensor")) %>%
separate(probe_sensor, sep = "-", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
mutate(depth_cm = str_replace(depth_cm, "n.a.", "NA")) %>%
mutate(depth_cm = as.numeric(depth_cm)) %>%
na.omit()
depths_function <- function(dat){
dat %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
#summarise so that all plots are combined
group_by(site, position, depth_cm, Betterdate) %>%
dplyr::summarize(avg_values_summarised = mean(avg_values_fixed),
std_values_summarised = sd(avg_values_fixed)/sqrt(n())) %>%
mutate(depth_cm = as.numeric(depth_cm)) %>%
force()
}
depths_function_nosummary <- function(dat){
dat %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
mutate(depth_cm = as.numeric(depth_cm)) %>%
force()
}
westhydric_depths_nosummary =
depths_function_nosummary(westhydric_avg)%>%
na.omit()
easthydric_depths_nosummary =
depths_function_nosummary(easthydric_avg) %>%
na.omit()
westmesic_depths_nosummary =
depths_function_nosummary(westmesic_avg)%>%
na.omit()
eastmesic_depths_nosummary =
depths_function_nosummary(eastmesic_avg)%>%
na.omit()
westdry_depths_nosummary =
depths_function_nosummary(westdry_avg)%>%
na.omit()
eastdry_depths_nosummary =
depths_function_nosummary(eastdry_avg) %>%
na.omit()
westhydric_depths =
depths_function(westhydric_avg)%>%
na.omit()
easthydric_depths =
depths_function(easthydric_avg) %>%
na.omit()
westmesic_depths =
depths_function(westmesic_avg)%>%
na.omit()
eastmesic_depths =
depths_function(eastmesic_avg)%>%
na.omit()
westdry_depths =
depths_function(westdry_avg)%>%
na.omit()
eastdry_depths =
depths_function(eastdry_avg) %>%
na.omit()
all_combine_depthbins =
westhydric_depths %>%
bind_rows(easthydric_depths, westmesic_depths, eastmesic_depths, westdry_depths, eastdry_depths) %>%
#mutate(depth_bins = case_when(depth_cm <= 100 ~ cut_width(depth_cm, width = 1, center = 1))) %>%
mutate(depth_bins = cut_width(depth_cm, width = 5, center=2.5)) %>%
mutate(depth_bins = stringi::stri_replace_all_fixed(depth_bins, "]","")) %>%
mutate(depth_bins = stringi::stri_replace_all_fixed(depth_bins, "[","")) %>%
mutate(depth_bins = stringi::stri_replace_all_fixed(depth_bins, "(","")) %>%
# now separate this into two different columns
separate(depth_bins, sep = ",", into = c("depth_start_cm", "depth_stop_cm")) %>%
mutate(depth_start_cm = as.integer(depth_start_cm),
depth_stop_cm = as.integer(depth_stop_cm)) %>%
mutate(depth2 = depth_stop_cm - depth_start_cm)
all_combine =
westhydric_depths %>%
bind_rows(easthydric_depths, westmesic_depths, eastmesic_depths, westdry_depths, eastdry_depths)
write.csv(all_combine, "processed/all_combine.csv")
write.csv(all_combine_depthbins, "processed/all_combine_depthbins.csv")
all_combine_depthbins_nosummmary =
westhydric_depths_nosummary %>%
bind_rows(easthydric_depths_nosummary, westmesic_depths_nosummary, eastmesic_depths_nosummary,
westdry_depths_nosummary, eastdry_depths_nosummary) %>%
#mutate(depth_bins = case_when(depth_cm <= 100 ~ cut_width(depth_cm, width = 1, center = 1))) %>%
mutate(depth_bins = cut_width(depth_cm, width = 5, center=2.5)) %>%
mutate(depth_bins = stringi::stri_replace_all_fixed(depth_bins, "]","")) %>%
mutate(depth_bins = stringi::stri_replace_all_fixed(depth_bins, "[","")) %>%
mutate(depth_bins = stringi::stri_replace_all_fixed(depth_bins, "(","")) %>%
# now separate this into two different columns
separate(depth_bins, sep = ",", into = c("depth_start_cm", "depth_stop_cm")) %>%
mutate(depth_start_cm = as.integer(depth_start_cm),
depth_stop_cm = as.integer(depth_stop_cm)) %>%
mutate(depth2 = depth_stop_cm - depth_start_cm)
all_combine_nosummary =
westhydric_depths_nosummary %>%
bind_rows(easthydric_depths_nosummary, westmesic_depths_nosummary,
eastmesic_depths_nosummary, westdry_depths_nosummary, eastdry_depths_nosummary)
write.csv(all_combine_nosummary, "processed/all_combine_nosummary.csv")
write.csv(all_combine_depthbins_nosummmary, "processed/all_combine_depthbins_nosummary.csv")
View(all_combine)
source("code/0-packages.R")
