names_to = "redox_avg", values_to = "avg_values") %>%
filter(avg_values < 1000) %>%
filter(avg_values > -600) %>%
mutate(lag = lag(avg_values) + avg_values))
westhydric_avg =
avg_separate(westhydric_dlname) %>%
left_join(westhydric_metadata, by = 'redox_NUM_Avg') %>%
pivot_longer(-c("redox_NUM_Avg", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = "redox_avg", values_to = "avg_values") %>%
filter(avg_values < 1000) %>%
filter(avg_values > -600) %>%
mutate(lag = lag(avg_values) + avg_values)
View(westhydric_avg)
westhydric_avg =
avg_separate(westhydric_dlname) %>%
left_join(westhydric_metadata, by = 'redox_NUM_Avg') %>%
pivot_longer(-c("redox_NUM_Avg", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = "redox_avg", values_to = "avg_values") %>%
filter(avg_values < 1000) %>%
filter(avg_values > -600) %>%
mutate(lag = lag(avg_values)/avg_values)
westhydric_avg =
avg_separate(westhydric_dlname) %>%
left_join(westhydric_metadata, by = 'redox_NUM_Avg') %>%
pivot_longer(-c("redox_NUM_Avg", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = "redox_avg", values_to = "avg_values") %>%
filter(avg_values < 1000) %>%
filter(avg_values > -600)
westmesic_avg =
avg_separate(westmesic_dlname) %>%
left_join(westmesic_metadata, by = 'redox_NUM_Avg') %>%
pivot_longer(-c("redox_NUM_Avg", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = "redox_avg", values_to = "avg_values") %>%
filter(avg_values < 1000) %>%
filter(avg_values > -600)
westdry_avg =
avg_separate(westdry_dlname) %>%
left_join(westdry_metadata, by = 'redox_NUM_Avg') %>%
pivot_longer(-c("redox_NUM_Avg", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = "redox_avg", values_to = "avg_values") %>%
filter(avg_values < 1000) %>%
filter(avg_values > -600)
easthydric_avg =
avg_separate(easthydric_dlname) %>%
left_join(easthydric_metadata, by = 'redox_NUM_Avg') %>%
pivot_longer(-c("redox_NUM_Avg", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = "redox_avg", values_to = "avg_values") %>%
filter(avg_values < 1000) %>%
filter(avg_values > -600)
eastmesic_avg =
avg_separate(eastmesic_dlname) %>%
left_join(eastmesic_metadata, by = 'redox_NUM_Avg') %>%
pivot_longer(-c("redox_NUM_Avg", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = "redox_avg", values_to = "avg_values") %>%
filter(avg_values < 1000) %>%
filter(avg_values > -600)
eastdry_avg =
avg_separate(eastdry_dlname) %>%
left_join(eastdry_metadata, by = 'redox_NUM_Avg') %>%
pivot_longer(-c("redox_NUM_Avg", "TIMESTAMP", "RECORD", "site", "position", "Betterdate"),
names_to = "redox_avg", values_to = "avg_values") %>%
filter(avg_values < 1000) %>%
filter(avg_values > -600)
sensor_depths_prename = read.csv("raw/datalogger_depths.csv")
sensor_depths =
sensor_depths_prename %>%
dplyr::rename(position = Site,
site = Area) %>%
mutate(site = recode(site, "West" = "west",
"East" = "east")) %>%
mutate(position = recode(position, "Hydric" = "hydric",
"Mesic" = "mesic",
"Dry" = "dry"),
Sensor = recode(Sensor, "redox_5-2-3_fromtip_Avg" = "redox_5_2-3_fromtip_Avg")) %>%
mutate(Sensor = str_remove(Sensor, "Redox_")) %>%
mutate(Sensor = str_remove(Sensor, "redox_")) %>%
mutate(Sensor = str_remove(Sensor, "_fromtip_Avg")) %>%
separate(Sensor, sep = "_", into = c("datalogger", "probe_sensor")) %>%
separate(probe_sensor, sep = "-", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
mutate(depth_cm = str_replace(depth_cm, "n.a.", "NA")) %>%
mutate(depth_cm = as.numeric(depth_cm)) %>%
na.omit()
westhydric_avg %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
#clean up outliers
mutate(lag = lag(avg_values)/avg_values)
westhydric_avg %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
#clean up outliers
mutate(lag = lag(avg_values_fixed)/avg_values_fixed)
westhydric_avg %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
#clean up outliers
mutate(lag = lag(avg_values_fixed)/avg_values_fixed)
westhydric2 =
westhydric_avg %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
#clean up outliers
mutate(lag = lag(avg_values_fixed)/avg_values_fixed)
View(westhydric2)
westhydric2 =
westhydric_avg %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
#clean up outliers
mutate(lag = lag(avg_values_fixed)-avg_values_fixed) %>%
#summarise so that all plots are combined
group_by(site, position, depth_cm, Betterdate) %>%
dplyr::summarize(avg_values_summarised = mean(avg_values_fixed),
std_values_summarised = sd(avg_values_fixed)/sqrt(n())) %>%
mutate(depth_cm = as.numeric(depth_cm)) %>%
force()
westhydric2 =
westhydric_avg %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
#clean up outliers
mutate(lag = lag(avg_values_fixed)-avg_values_fixed)
westhydric2 =
westhydric_avg %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
#clean up outliers
mutate(lag1 = lag(avg_values_fixed)-avg_values_fixed,
lag2 = lead(avg_values_fixed)+avg_values_fixed)
westhydric2 =
westhydric_avg %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
#clean up outliers
mutate(lag = lag(avg_values_fixed)-avg_values_fixed,
lead = lead(avg_values_fixed)+avg_values_fixed)
westhydric2 =
westhydric_avg %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
#clean up outliers
mutate(lag = lag(avg_values_fixed)-avg_values_fixed,
lead = lead(avg_values_fixed)-avg_values_fixed)
westhydric2 =
westhydric_avg %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
#clean up outliers
mutate(lag = lag(avg_values_fixed)-avg_values_fixed,
lead = lead(avg_values_fixed)-avg_values_fixed) %>%
mutate(laglead = case_when(lag > 100 & lead > 100 ~ "artifact")))
westhydric2 =
westhydric_avg %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
#clean up outliers
mutate(lag = lag(avg_values_fixed)-avg_values_fixed,
lead = lead(avg_values_fixed)-avg_values_fixed) %>%
mutate(laglead = case_when(lag > 100 & lead > 100 ~ "artifact"))
westhydric2 =
westhydric_avg %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
#clean up outliers
mutate(lag = lag(avg_values_fixed)-avg_values_fixed,
lead = lead(avg_values_fixed)-avg_values_fixed) %>%
mutate(laglead = case_when(lag > 200 & lead > 200 ~ "artifact"))
westhydric2 =
westhydric_avg %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
#clean up outliers
mutate(lag = lag(avg_values_fixed)-avg_values_fixed,
lead = lead(avg_values_fixed)-avg_values_fixed) %>%
mutate(laglead = case_when(lag > 100 & lead > 100 ~ "artifact"))
westhydric2 =
westhydric_avg %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
#clean up outliers
mutate(lag = lag(avg_values_fixed)-avg_values_fixed,
lead = lead(avg_values_fixed)-avg_values_fixed) %>%
mutate(laglead = case_when(lag > 150 & lead > 150 ~ "artifact"))
westhydric2 =
westhydric_avg %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
#clean up outliers
mutate(lag = lag(avg_values_fixed)-avg_values_fixed,
lead = lead(avg_values_fixed)-avg_values_fixed) %>%
mutate(laglead = case_when(lag > 150 & lead <  -150 ~ "artifact"))
westhydric2 =
westhydric_avg %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
#clean up outliers
mutate(lag = lag(avg_values_fixed)-avg_values_fixed,
lead = lead(avg_values_fixed)-avg_values_fixed) %>%
mutate(laglead = case_when(lag > 150 & lead <  -150 ~ "artifact",
lag < -150 & lead > 150 ~ "artifact"))
westhydric2 =
westhydric_avg %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
#clean up outliers
mutate(lag = lag(avg_values_fixed)-avg_values_fixed,
lead = lead(avg_values_fixed)-avg_values_fixed) %>%
mutate(laglead = case_when(lag > 200 & lead <  -200 ~ "artifact",
lag < -200 & lead > 200 ~ "artifact"))
View(westhydric2)
depths_function <- function(dat){
dat  %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
force()
}
depths_function <- function(dat){
dat  %>%
mutate(redox_avg = recode(redox_avg, 'redox_5.2.3_fromtip_Avg' = "redox_5_2_3_fromtip_Avg")) %>%
mutate(redox_avg = str_remove(redox_avg, "Redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "redox_")) %>%
mutate(redox_avg = str_remove(redox_avg, "_fromtip_Avg")) %>%
separate(redox_avg, sep = "_", into = c("datalogger", "probe_sensor")) %>%
filter(datalogger != "NUM") %>%
dplyr::select(-redox_NUM_Avg) %>%
mutate(probe_sensor = recode(probe_sensor, "1.8" = "1_8", "1.7" = "1_7", "1.6" = "1_6", "1.5" = "1_5", "1.4" = "1_4", "1.3" = "1_3", "1.2" = "1_2", "1.1" = "1_1",
"2.8" = "2_8", "2.7" = "2_7", "2.6" = "2_6", "2.5" = "2_5", "2.4" = "2_4", "2.3" = "2_3", "2.2" = "2_2", "2.1" = "2_1",
"3.8" = "3_8", "3.7" = "3_7", "3.6" = "3_6", "3.5" = "3_5", "3.4" = "3_4", "3.3" = "3_3", "3.2" = "3_2", "3.1" = "3_1")) %>%
separate(probe_sensor, sep = "_", into = c("probe", "sensor")) %>%
mutate(sensor = as.numeric(sensor)) %>%
left_join(sensor_depths) %>%
#add 197 to all redox potentials to report data relative to the standard hydrogen electrode
dplyr::mutate(avg_values_fixed = avg_values + 197) %>%
force()
}
westhydric_depths =
depths_function(westhydric_avg)%>%
na.omit()
easthydric_depths =
depths_function(easthydric_avg) %>%
na.omit()
westmesic_depths =
depths_function(westmesic_avg)%>%
na.omit()
eastmesic_depths =
depths_function(eastmesic_avg)%>%
na.omit()
westdry_depths =
depths_function(westdry_avg)%>%
na.omit()
eastdry_depths =
depths_function(eastdry_avg) %>%
na.omit()
eastdry_depths2 =
eastdry_depths %>%
mutate(lag = lag(avg_values_fixed)-avg_values_fixed,
lead = lead(avg_values_fixed)-avg_values_fixed) %>%
mutate(laglead = case_when(lag > 200 & lead < -200 ~ artifact))
eastdry_depths2 =
eastdry_depths %>%
mutate(lag = lag(avg_values_fixed)-avg_values_fixed,
lead = lead(avg_values_fixed)-avg_values_fixed) %>%
mutate(laglead = case_when(lag > 200 & lead < -200 ~ 'artifact'))
View(eastdry_depths2)
eastdry_depths2 =
eastdry_depths %>%
mutate(lag = lag(avg_values_fixed)-avg_values_fixed,
lead = lead(avg_values_fixed)-avg_values_fixed) %>%
mutate(laglead = case_when(lag > 200 & lead < -200 ~ 'artifact'),
laglead = case_when(lag <-200 & lead >200 ~ 'artifact'))
eastdry_depths2 =
eastdry_depths %>%
mutate(lag = lag(avg_values_fixed)-avg_values_fixed,
lead = lead(avg_values_fixed)-avg_values_fixed) %>%
mutate(laglead = case_when(lag > 200 & lead < -200 ~ 'artifact',
lag < -200 & lead >200 ~ 'artifact'))
View(sensor_depths)
