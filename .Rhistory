scale_fill_manual(values = c("#efc3e6", "#b8bedd"))+
labs(x = "date collected",
y = "number of samples",
fill = "bulk density
& volumetric water")+
facet_grid(Site~Area, scales = "free")+
theme_er1()+
theme(axis.text.x = element_text (vjust = 0.5, hjust=1, angle = 90, size = 9), legend.position = "top",
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank())
ncount %>%
mutate(Site = factor(Site, levels = c("Dry", "Mesic", "Hydric", "Transect"))) %>%
mutate(Area = factor(Area, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(Date_collected = factor(Date_collected, levels = c("6-Jul-21", "7-Jul-21", "13-Jul-21", "14-Jul-21", "24-Jul-21", "30-Jul-21",
"31-Jul-21", "7-Aug-21"))) %>%
ggplot()+
geom_point(aes(x = Date_collected, y = n, color = data, group = Core_ID),
size = 3.5, shape = c("#21"))+
scale_fill_manual(values = c("#efc3e6", "#b8bedd"))+
labs(x = "date collected",
y = "number of samples",
fill = "bulk density
& volumetric water")+
facet_grid(Site~Area, scales = "free")+
theme_er1()+
theme(axis.text.x = element_text (vjust = 0.5, hjust=1, angle = 90, size = 9), legend.position = "top",
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank())
ncount %>%
mutate(Site = factor(Site, levels = c("Dry", "Mesic", "Hydric", "Transect"))) %>%
mutate(Area = factor(Area, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(Date_collected = factor(Date_collected, levels = c("6-Jul-21", "7-Jul-21", "13-Jul-21", "14-Jul-21", "24-Jul-21", "30-Jul-21",
"31-Jul-21", "7-Aug-21"))) %>%
ggplot()+
geom_point(aes(x = Date_collected, y = n, color = data, group = Core_ID),
size = 3.5, shape = c("21"))+
scale_fill_manual(values = c("#efc3e6", "#b8bedd"))+
labs(x = "date collected",
y = "number of samples",
fill = "bulk density
& volumetric water")+
facet_grid(Site~Area, scales = "free")+
theme_er1()+
theme(axis.text.x = element_text (vjust = 0.5, hjust=1, angle = 90, size = 9), legend.position = "top",
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank())
ncount %>%
mutate(Site = factor(Site, levels = c("Dry", "Mesic", "Hydric", "Transect"))) %>%
mutate(Area = factor(Area, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(Date_collected = factor(Date_collected, levels = c("6-Jul-21", "7-Jul-21", "13-Jul-21", "14-Jul-21", "24-Jul-21", "30-Jul-21",
"31-Jul-21", "7-Aug-21"))) %>%
ggplot()+
geom_point(aes(x = Date_collected, y = n, color = data, group = Core_ID),
size = 3.5)+
scale_fill_manual(values = c("#efc3e6", "#b8bedd"))+
labs(x = "date collected",
y = "number of samples",
fill = "bulk density
& volumetric water")+
facet_grid(Site~Area, scales = "free")+
theme_er1()+
theme(axis.text.x = element_text (vjust = 0.5, hjust=1, angle = 90, size = 9), legend.position = "top",
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank())
ncount %>%
mutate(Site = factor(Site, levels = c("Dry", "Mesic", "Hydric", "Transect"))) %>%
mutate(Area = factor(Area, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(Date_collected = factor(Date_collected, levels = c("6-Jul-21", "7-Jul-21", "13-Jul-21", "14-Jul-21", "24-Jul-21", "30-Jul-21",
"31-Jul-21", "7-Aug-21"))) %>%
ggplot()+
geom_point(aes(x = Date_collected, y = n, color = data, group = Core_ID),
size = 3.5)+
scale_color_manual(values = c("#efc3e6", "#b8bedd"))+
labs(x = "date collected",
y = "number of samples",
fill = "bulk density
& volumetric water")+
facet_grid(Site~Area, scales = "free")+
theme_er1()+
theme(axis.text.x = element_text (vjust = 0.5, hjust=1, angle = 90, size = 9), legend.position = "top",
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank())
ncount2 =
bd_select %>%
replace(is.na(.),"not analyzed")  %>%
mutate(data = case_when(grepl("not analyzed", soil_bulk_density_g_cm3) ~ "not analyzed", TRUE ~ "analyzed"))
ncount2 %>%
mutate(Site = factor(Site, levels = c("Dry", "Mesic", "Hydric", "Transect"))) %>%
mutate(Area = factor(Area, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(Date_collected = factor(Date_collected, levels = c("6-Jul-21", "7-Jul-21", "13-Jul-21", "14-Jul-21", "24-Jul-21", "30-Jul-21",
"31-Jul-21", "7-Aug-21"))) %>%
ggplot()+
geom_point(aes(x = Date_collected, y = Horizon, color = data),
size = 3.5)+
scale_color_manual(values = c("#efc3e6", "#b8bedd"))+
labs(x = "date collected",
y = "number of samples",
fill = "bulk density
& volumetric water")+
facet_grid(Site~Area, scales = "free")+
theme_er1()+
theme(axis.text.x = element_text (vjust = 0.5, hjust=1, angle = 90, size = 9), legend.position = "top",
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank())
ncount2 %>%
mutate(Site = factor(Site, levels = c("Dry", "Mesic", "Hydric", "Transect"))) %>%
mutate(Area = factor(Area, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(Date_collected = factor(Date_collected, levels = c("6-Jul-21", "7-Jul-21", "13-Jul-21", "14-Jul-21", "24-Jul-21", "30-Jul-21",
"31-Jul-21", "7-Aug-21"))) %>%
ggplot()+
geom_point(aes(x = Date_collected, y = Horizon, color = data),
size = 3.5, position = jitter)+
scale_color_manual(values = c("#efc3e6", "#b8bedd"))+
labs(x = "date collected",
y = "number of samples",
fill = "bulk density
& volumetric water")+
facet_grid(Site~Area, scales = "free")+
theme_er1()+
theme(axis.text.x = element_text (vjust = 0.5, hjust=1, angle = 90, size = 9), legend.position = "top",
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank())
ncount %>%
mutate(Site = factor(Site, levels = c("Dry", "Mesic", "Hydric", "Transect"))) %>%
mutate(Area = factor(Area, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(Date_collected = factor(Date_collected, levels = c("6-Jul-21", "7-Jul-21", "13-Jul-21", "14-Jul-21", "24-Jul-21", "30-Jul-21",
"31-Jul-21", "7-Aug-21"))) %>%
ggplot()+
geom_col(aes(x = Date_collected, y = n, fill = data))+
scale_fill_manual(values = c("#efc3e6", "#b8bedd"))+
labs(x = "date collected",
y = "number of samples",
fill = "bulk density
& volumetric water")+
facet_grid(Site~Area, scales = "free")+
theme_er1()+
theme(axis.text.x = element_text (vjust = 0.5, hjust=1, angle = 90, size = 9), legend.position = "top",
panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank())
View(ncount2)
write.csv(ncount2, "output/ncount2.csv")
source("code/0-packages.R")
combo_redox_withdepths2022 = read.csv("processed/allcombine_2022_frozen.csv")
combo_redox_withdepths2021 = read.csv("processed/allcombine_2021_frozen.csv")
View(combo_redox_withdepths2022)
View(combo_redox_withdepths2021)
knitr::opts_chunk$set(echo = TRUE)
combo_redox_withdepths2022 = read.csv("processed/allcombine_2022_frozen.csv")
combo_redox_withdepths2021 = read.csv("processed/allcombine_2021_frozen.csv")
final_temp_sal_moist = read.csv("processed/final_temp_salinity_avgs.csv")
final_temp_sal_moist2022 = read.csv("processed/2022final_temp_salinity_avgs.csv")
thaw_depths = read.csv("raw/thaw_depth_2021.csv")
bd_grav_cleaned = read.csv("raw/PhIr2021_Soil_Inventory_bd.csv") %>%
#dplyr::select(-c(X)) %>%
mutate(Area = recode(Area, "East" = "acidic tundra",
"West" = "non-acidic tundra")) %>%
dplyr::mutate(soil_material = case_when(grepl("O",Horizon)~"organic",
grepl("M",Horizon)~"mineral")) %>%
mutate(volumetric_water_content_cm3_cm3 = soil_bulk_density_g_cm3 * grav_water_gh20_per_gdrysoil)
bd_select =
bd_grav_cleaned %>%
dplyr::select(Sample_ID, Core_ID, Date_collected, Area, Site, Plot_num, Plot_ID,
Horizon, Depth_1_cm, Depth_2_cm, Depth_3_cm, Depth_4_cm, Average_Depth_cm, real_depth_cm,
soil_bulk_density_g_cm3, volumetric_water_content_cm3_cm3, soil_material) %>%
mutate(label = Horizon) %>%
mutate(label = factor(label, levels = c("O", "O1", "O2", "O3", "M", "M1", "M2"))) %>%
mutate(date_simple = recode(Date_collected, "6-Jul-21" = "Plot-1", "7-Jul-21" = "Plot-1",
"13-Jul-21" = "Plot-2", "14-Jul-21" = "Plot-2",
"24-Jul-21" = "Plot-3",
"30-Jul-21" = "Plot-4", "31-Jul-21" = "Plot-4",
"7-Aug-21" = "Plot-5")) %>%
mutate(label = paste0(date_simple, "-", Plot_num))
View(bd_select)
bulkdensity = read.csv("output/bd_grouped.csv")
View(bulkdensity)
bd_grav_cleaned =
bd_grav %>%
mutate(Area = recode(Area, "East" = "acidic tundra",
"West" = "non-acidic tundra")) %>%
dplyr::mutate(soil_material = case_when(grepl("O",Horizon)~"organic",
grepl("M",Horizon)~"mineral")) %>%
mutate(volumetric_water_content_cm3_cm3 = soil_bulk_density_g_cm3 * grav_water_gh20_per_gdrysoil)
soil_properties_cleaningfunction = function(dat){
bd_grav_cleaned =
dat %>%
mutate(Area = recode(Area, "East" = "acidic tundra",
"West" = "non-acidic tundra")) %>%
dplyr::mutate(soil_material = case_when(grepl("O",Horizon)~"organic",
grepl("M",Horizon)~"mineral")) %>%
mutate(volumetric_water_content_cm3_cm3 = soil_bulk_density_g_cm3 * grav_water_gh20_per_gdrysoil)
}
source("code/functions_for_modeldatacomparisons_dataexplainer.R")
soil_properties_cleaningfunction = function(dat){
bd_grav_cleaned =
dat %>%
mutate(Area = recode(Area, "East" = "acidic tundra",
"West" = "non-acidic tundra")) %>%
dplyr::mutate(soil_material = case_when(grepl("O",Horizon)~"organic",
grepl("M",Horizon)~"mineral")) %>%
mutate(volumetric_water_content_cm3_cm3 = soil_bulk_density_g_cm3 * grav_water_gh20_per_gdrysoil)
}
soil_properties_selectfunction = function(dat){
bd_select =
dat %>%
dplyr::select(Sample_ID, Core_ID, Date_collected, Area, Site, Plot_num, Plot_ID,
Horizon, Depth_1_cm, Depth_2_cm, Depth_3_cm, Depth_4_cm, Average_Depth_cm, real_depth_cm,
soil_bulk_density_g_cm3, volumetric_water_content_cm3_cm3, soil_material) %>%
mutate(label = Horizon) %>%
mutate(label = factor(label, levels = c("O", "O1", "O2", "O3", "M", "M1", "M2"))) %>%
mutate(date_simple = recode(Date_collected, "6-Jul-21" = "Plot-1", "7-Jul-21" = "Plot-1",
"13-Jul-21" = "Plot-2", "14-Jul-21" = "Plot-2",
"24-Jul-21" = "Plot-3",
"30-Jul-21" = "Plot-4", "31-Jul-21" = "Plot-4",
"7-Aug-21" = "Plot-5")) %>%
mutate(label = paste0(date_simple, "-", Plot_num))
}
bd_cleaned = soil_properties_cleaningfunction(bd_grav)
bd_grav = read.csv("raw/PhIr2021_Soil_Inventory_bd.csv")
bd_cleaned = soil_properties_cleaningfunction(bd_grav)
bd_select = soil_properties_selectfunction(bd_cleaned)
redox2021_remove_frozenpoints_function = function(dat){
dat %>%
# mutate(keep = case_when(site == "non-acidic tundra" & position == "hydric" & probe == 1 ~ "keep",
#                         site == "acidic tundra" & position == "hydric" & probe == 3 ~ "keep",
#                         site == "non-acidic tundra" & position == "dry" & probe == 1 ~ "keep",
#                         site == "acidic tundra" & position == "dry" & probe == 1 ~ "keep",
#                         site == "acidic tundra" & position == "mesic" & probe == 1 ~ "keep",
#                         site == "non-acidic tundra" & position == "mesic" & probe == 3 ~ "keep")) %>%
dplyr::mutate(keep = if_else(site == "non-acidic tundra" & position == "hydric" & depth_cm > 40 & Betterdate <= '2021-08-09 00:00', paste0("frozen"),"unfrozen")) %>%
filter(keep == "unfrozen") %>%
mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra")))
}
redox2021_remove_frozenpoints_function = function(dat){
dat %>%
# mutate(keep = case_when(site == "non-acidic tundra" & position == "hydric" & probe == 1 ~ "keep",
#                         site == "acidic tundra" & position == "hydric" & probe == 3 ~ "keep",
#                         site == "non-acidic tundra" & position == "dry" & probe == 1 ~ "keep",
#                         site == "acidic tundra" & position == "dry" & probe == 1 ~ "keep",
#                         site == "acidic tundra" & position == "mesic" & probe == 1 ~ "keep",
#                         site == "non-acidic tundra" & position == "mesic" & probe == 3 ~ "keep")) %>%
dplyr::mutate(keep = if_else(site == "non-acidic tundra" & position == "hydric" & depth_cm > 40 & Betterdate <= '2021-08-09 00:00', paste0("frozen"),"unfrozen")) %>%
filter(keep == "unfrozen") %>%
mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra")))
}
redox2022_remove_frozenpoints_function = function(dat){
dat %>%
dplyr::mutate(keep = if_else(site == "non-acidic tundra" & position == "dry" & depth_cm > 21 & Betterdate >= '2022-07-30 00:00', paste0("frozen"),"unfrozen")) %>%
filter(keep == "unfrozen") %>%
mutate(site = factor(site, levels = c("non-acidic tundra", "acidic tundra")))
}
#remove frozen data
frozen_group2021 = redox2021_remove_frozenpoints_function(combo_redox_withdepths2021)
frozen_group2022 = redox2022_remove_frozenpoints_function(combo_redox_withdepths2022)
redox_202_groupbytemporal_function = function(dat){
dat %>%
#filter(Betterdate >= '2021-07-01 00:00') %>%
mutate(position = factor(position, levels = c("dry", "mesic", "hydric"))) %>%
mutate(site = recode(site, "east" = "acidic tundra",
"west" = "non-acidic tundra")) %>%
mutate(forsep = TIMESTAMP) %>%
separate(forsep, sep = " ", into = c("date", "time")) %>%
separate(date, sep = "/", into = c("month", "day", "year")) %>%
mutate(month = recode(month,  "6" = "early summer",
"7" = "mid summer",
"8" = "late summer",
"9" = "early fall")) %>%
group_by(site, position, depth_cm, month) %>%
dplyr::summarise(redox_avg_mV = round(mean(avg_values_fixed),2),
redox_sd = round(sd(avg_values_fixed),2),
redox_se = round(sd(avg_values_fixed)/sqrt(n()),2),
redox_sd2 = (redox_sd)/2) %>%
mutate(year = 2022)
}
redox_2021_groupbytemporal_function = function(dat){
dat %>%
#filter(Betterdate >= '2021-07-01 00:00') %>%
mutate(position = factor(position, levels = c("dry", "mesic", "hydric"))) %>%
mutate(site = recode(site, "east" = "acidic tundra",
"west" = "non-acidic tundra")) %>%
mutate(forsep = TIMESTAMP) %>%
separate(forsep, sep = " ", into = c("date", "time")) %>%
separate(date, sep = "/", into = c("month", "day", "year")) %>%
mutate(month = recode(month,  "6" = "early summer",
"7" = "mid summer",
"8" = "late summer",
"9" = "early fall")) %>%
group_by(site, position, depth_cm, month) %>%
dplyr::summarise(redox_avg_mV = round(mean(avg_values_fixed),2),
redox_sd = round(sd(avg_values_fixed),2),
redox_se = round(sd(avg_values_fixed)/sqrt(n()),2),
redox_sd2 = (redox_sd)/2) %>%
mutate(year = 2022)
}
redox_grouped_2021 = redox_2021_groupbytemporal_function(redox_unfrozen_2021)
#remove frozen data
redox_unfrozen_2021 = redox2021_remove_frozenpoints_function(combo_redox_withdepths2021)
redox_grouped_2021 = redox_2021_groupbytemporal_function(redox_unfrozen_2021)
redox_unfrozen_2022 = redox2022_remove_frozenpoints_function(combo_redox_withdepths2022)
redox_2021_groupbytemporal_function = function(dat){
dat %>%
# filter(Betterdate >= '2021-07-01 00:00') %>%
mutate(position = factor(position, levels = c("dry", "mesic", "hydric"))) %>%
mutate(site = recode(site, "east" = "acidic tundra",
"west" = "non-acidic tundra")) %>%
mutate(forsep = TIMESTAMP) %>%
separate(forsep, sep = " ", into = c("date", "time")) %>%
separate(date, sep = "/", into = c("month", "day", "year")) %>%
mutate(month = recode(month,  "6" = "early summer",
"7" = "mid summer",
"8" = "late summer",
"9" = "early fall")) %>%
group_by(site, position, depth_cm, month) %>%
dplyr::summarise(redox_avg_mV = round(mean(avg_values_fixed),2),
redox_sd = round(sd(avg_values_fixed),2),
redox_se = round(sd(avg_values_fixed)/sqrt(n()),2),
redox_sd2 = (redox_sd)/2)
}
redox_2022_groupbytemporal_function = function(dat){
dat %>%
#filter(Betterdate >= '2021-07-01 00:00') %>%
mutate(position = factor(position, levels = c("dry", "mesic", "hydric"))) %>%
mutate(site = recode(site, "east" = "acidic tundra",
"west" = "non-acidic tundra")) %>%
mutate(forsep = TIMESTAMP) %>%
separate(forsep, sep = " ", into = c("date", "time")) %>%
separate(date, sep = "/", into = c("month", "day", "year")) %>%
mutate(month = recode(month,  "6" = "early summer",
"7" = "mid summer",
"8" = "late summer",
"9" = "early fall")) %>%
group_by(site, position, depth_cm, month) %>%
dplyr::summarise(redox_avg_mV = round(mean(avg_values_fixed),2),
redox_sd = round(sd(avg_values_fixed),2),
redox_se = round(sd(avg_values_fixed)/sqrt(n()),2),
redox_sd2 = (redox_sd)/2) %>%
mutate(year = 2022)
}
redox_grouped_2021 = redox_2021_groupbytemporal_function(redox_unfrozen_2021)
redox_grouped_2021 = redox_2021_groupbytemporal_function(redox_unfrozen_2021)
redox_unfrozen_2022 = redox2022_remove_frozenpoints_function(combo_redox_withdepths2022)
redox_unfrozen_2022 = redox2022_remove_frozenpoints_function(combo_redox_withdepths2022)
redox_unfrozen_2022 = redox_2022_groupbytemporal_function(redox_unfrozen_2022)
source("code/0-packages.R")
moisturetempsal_2021_cleaningfunction = function(dat){
dat %>%
mutate(forsep = TIMESTAMP) %>%
separate(TIMESTAMP, sep = " ", into = c("date2", "time")) %>%
separate(date2, sep = "/", into =c('month', 'day', 'year')) %>%
mutate(date = as.Date(paste(year, month, day, sep = "-"))) %>%
mutate(datetime = ymd_hm(paste(date, time)),
date = ymd(date)) %>%
separate(forsep, sep = " ", into = c("date", "time")) %>%
separate(date, sep = "/", into = c("month", "day", "year")) %>%
mutate(month = recode(month,  "6" = "early summer",
"7" = "mid summer",
"8" = "late summer",
"9" = "early fall")) %>%
mutate(position = factor(position, levels = c("dry", "mesic", "hydric"))) %>%
mutate(site = recode(site, "east" = "acidic tundra",
"west" = "non-acidic tundra")) %>%
dplyr::rename(depth_cm = depth) %>%
na.omit() %>%
mutate(frozen = case_when(temp < -1 ~ "frozen", TRUE ~ "unfrozen"))
}
temp_sal_moist = read.csv("processed/final_temp_salinity_avgs.csv")
temp_sal_moist = read.csv("processed/final_temp_salinity_avgs.csv")
temp_sal_moist2022 = read.csv("processed/2022final_temp_salinity_avgs.csv")
temp_sal_moist2021 = read.csv("processed/final_temp_salinity_avgs.csv")
moisturetempsal2021_cleaned = moisturetempsal_2021_cleaningfunction(temp_sal_moist2021)
View(moisturetempsal2021_cleaned)
moisturetempsal_2022_cleaningfunction = function(dat){
dat %>%
mutate(forsep = TIMESTAMP) %>%
separate(TIMESTAMP, sep = " ", into = c("date2", "time")) %>%
separate(date2, sep = "/", into =c('month', 'day', 'year')) %>%
mutate(date = as.Date(paste(year, month, day, sep = "-"))) %>%
mutate(datetime = ymd_hm(paste(date, time)),
date = ymd(date)) %>%
separate(forsep, sep = " ", into = c("date", "time")) %>%
separate(date, sep = "/", into = c("month", "day", "year")) %>%
mutate(month = recode(month,  "6" = "early summer",
"7" = "mid summer",
"8" = "late summer",
"9" = "early fall")) %>%
mutate(position = factor(position, levels = c("dry", "mesic", "hydric"))) %>%
mutate(site = recode(site, "east" = "acidic tundra",
"west" = "non-acidic tundra")) %>%
dplyr::rename(depth_cm = depth) %>%
na.omit() %>%
mutate(frozen = case_when(temp < -1 ~ "frozen", TRUE ~ "unfrozen"))
}
redox_unfrozen_2022 = redox_2022_groupbytemporal_function(redox_unfrozen_2022)
moisturetempsal2022_cleaned = moisturetempsal_2022_cleaningfunction(temp_sal_moist2022)
redox_unfrozen_2022 = redox2022_remove_frozenpoints_function(combo_redox_withdepths2022)
redox_unfrozen_2022 = redox_2022_groupbytemporal_function(redox_unfrozen_2022)
moisturetempsal_2021_groupfunction = function(dat){
dat %>%
filter(moisture > 1) %>%
mutate(position = factor(position, levels = c("dry", "mesic", "hydric"))) %>%
mutate(site = recode(site, "east" = "acidic tundra",
"west" = "non-acidic tundra")) %>%
group_by(site, position, depth_cm, month) %>%
dplyr::summarise(moisture_avg = round(mean(moisture),2),
moisture_sd = round(sd(moisture),2),
moisture_se = round(sd(moisture)/sqrt(n()),2))
}
moisturetempsal_2022_groupfunction = function(dat){
dat %>%
filter(moisture > 1) %>%
mutate(position = factor(position, levels = c("dry", "mesic", "hydric"))) %>%
mutate(site = recode(site, "east" = "acidic tundra",
"west" = "non-acidic tundra")) %>%
group_by(site, position, depth_cm, month) %>%
dplyr::summarise(moisture_avg = round(mean(moisture),2),
moisture_sd = round(sd(moisture),2),
moisture_se = round(sd(moisture)/sqrt(n()),2))
}
moisturetempsal2021_grouped = moisturetempsal_2021_groupfunction(moisturetempsal2021_cleaned)
moisturetempsal2022_grouped = moisturetempsal_2022_groupfunction(moisturetempsal2022_cleaned)
View(moisturetempsal2022_grouped)
View(moisturetempsal2022_grouped)
raw_ICP = read.csv("raw/2023_LIME_ICPAES_002R_Herndon_0118.csv")
raw_ICP_diluted = read.csv("raw/2023_LIME_ICPAES_002R_Herndon_0118_diluted.csv")
processed_ICP_diluted =
raw_ICP_diluted %>%
mutate(Area = recode(Area, "West" = "non-acidic tundra",
"East" = "acidic tundra")) %>%
mutate(Area = factor(Area, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(Site = factor(Site, levels = c("Dry", "Mesic", "Hydric"))) %>%
# dplyr::select(c(SampleID, Date, Time, Area, Site, Plot, Depth_cm, Al_ug_mL, Ca_ug_mL, Fe_ug_mL,
#                 K_ug_mL, Mg_ug_mL, Mn_ug_mL, Na_ug_mL, P_ug_mL)) %>%
mutate(P_ug_mL = recode(P_ug_mL, "<0.01" = "0.005",
"<0.1" = "0.05")) %>%  #this seems like an error...need to check
separate(Date, sep = "-", into =c('day', 'month', 'year')) %>%
mutate(month = recode(month, "Jun" = "06", "Jul" = "07", "Aug" = "08", "Sep" = "09")) %>%
mutate(year = recode(year, "22" = "2022")) %>%
mutate(date = as.Date(paste(year, month, day, sep = "-"))) %>%
mutate(Al_ug_mL = as.numeric(Al_ug_mL)) %>%
mutate(Ca_ug_mL = as.numeric(Ca_ug_mL)) %>%
mutate(K_ug_mL = as.numeric(K_ug_mL)) %>%
mutate(Mn_ug_mL = as.numeric(Mn_ug_mL)) %>%
mutate(Mg_ug_mL = as.numeric(Mg_ug_mL)) %>%
mutate(Na_ug_mL = as.numeric(Na_ug_mL)) %>%
mutate(P_ug_mL = as.numeric(P_ug_mL)) %>%
mutate(Fe_ug_mL = as.numeric(Fe_ug_mL)) %>%
pivot_longer(-c(SampleID, date, Time, Area, Site, Plot, day, month, year, Depth_cm), names_to = 'ICP', values_to = 'concentration') %>%
mutate(concentration = concentration * 10)
processed_ICP =
raw_ICP %>%
mutate(Area = recode(Area, "West" = "non-acidic tundra",
"East" = "acidic tundra")) %>%
mutate(Area = factor(Area, levels = c("non-acidic tundra", "acidic tundra"))) %>%
mutate(Site = factor(Site, levels = c("Dry", "Mesic", "Hydric"))) %>%
na.omit() %>%
dplyr::select(c(SampleID, Date, Time, Area, Site, Plot, Depth_cm, Al_ug_mL, Ca_ug_mL, Fe_ug_mL,
K_ug_mL, Mg_ug_mL, Mn_ug_mL, Na_ug_mL, P_ug_mL)) %>%
na.omit() %>%
mutate(Al_ug_mL = recode(Al_ug_mL, "<0.01" = "0.005")) %>%
mutate(Mn_ug_mL = recode(Mn_ug_mL, "<0.005" = '0.003')) %>%
mutate(P_ug_mL = recode(P_ug_mL, "<0.01" = "0.005",
"<0.1" = "0.05")) %>%  #this seems like an error...need to check
separate(Date, sep = "-", into =c('day', 'month', 'year')) %>%
mutate(month = recode(month, "Jun" = "06", "Jul" = "07", "Aug" = "08", "Sep" = "09")) %>%
mutate(year = recode(year, "22" = "2022")) %>%
mutate(date = as.Date(paste(year, month, day, sep = "-"))) %>%
mutate(Al_ug_mL = as.numeric(Al_ug_mL)) %>%
mutate(Ca_ug_mL = as.numeric(Ca_ug_mL)) %>%
mutate(K_ug_mL = as.numeric(K_ug_mL)) %>%
mutate(Mn_ug_mL = as.numeric(Mn_ug_mL)) %>%
mutate(Mg_ug_mL = as.numeric(Mg_ug_mL)) %>%
mutate(Na_ug_mL = as.numeric(Na_ug_mL)) %>%
mutate(P_ug_mL = as.numeric(P_ug_mL)) %>%
mutate(Fe_ug_mL = as.numeric(Fe_ug_mL)) %>%
pivot_longer(-c(SampleID, date, Time, Area, Site, Plot, day, month, year, Depth_cm), names_to = 'ICP', values_to = 'concentration') %>%
vctrs::vec_c(processed_ICP_diluted) %>%
mutate(month = recode(month, "06" = "June", "07" = "July", "08" = "August", "09" = "September"))
write.csv(processed_ICP, "processed/ICP_2022.csv")
View(processed_ICP)
porewater_ICP_2022 = read.csv("processed/ICP_2022.csv")
porewater_ICP_2021 = read.csv("processed/rhizon_2021.csv")
View(porewater_ICP_2021)
View(all_grouped)
View(bd_cleaned)
View(bd_grav)
knitr::opts_chunk$set(echo = TRUE)
write.csv(redox_withdepths2021, "modeling-data-outputfiles/redox_withdepths2021.csv")
redox_withdepths2022 = read.csv("processed/allcombine_2022_frozen.csv")
redox_withdepths2022 = read.csv("processed/allcombine_2022_frozen.csv")
redox_withdepths2021 = read.csv("processed/allcombine_2021_frozen.csv")
write.csv(redox_withdepths2021, "modeling-data-outputfiles/redox_withdepths2021.csv")
write.csv(redox_withdepths2022, "modeling-data-outputfiles/redox_withdepths2022.csv")
write.csv(redox_withdepths2021, "modeling-data-output-files/redox_withdepths2021.csv")
write.csv(redox_withdepths2021, "modeling-data-output-files/redox_withdepths2021.csv")
write.csv(redox_withdepths2022, "modeling-data-outputfiles/redox_withdepths2022.csv")
#Moisture Temperature Salinity
write.csv(temp_sal_moist2021, "modeling-data-output-files/temp_sal_moist2021.csv")
#Moisture Temperature Salinity
write.csv(temp_sal_moist2021, "modeling-data-output-files/temp_sal_moist2021.csv")
write.csv(temp_sal_moist2022, "modeling-data-output-files/temp_sal_moist2022.csv")
write.csv(thaw_depths, "modeling-data-output-files/thaw_depths.csv")
write.csv(bd_grav, "modeling-data-output-files/bd_grav.csv")
write.csv(bulkdensity_tableoutput, "modeling-data-output-files/bulkdensity_tableoutput.csv")
bulkdensity_tableoutput = read.csv("output/bd_grouped.csv")
write.csv(bulkdensity_tableoutput, "modeling-data-output-files/bulkdensity_tableoutput.csv")
#Porewater data
write.csv(porewater_ICP_2021, "modeling-data-output-files/porewater_ICP_2021.csv")
write.csv(porewater_ICP_2022, "modeling-data-output-files/porewater_ICP_2022.csv")
write.csv(moisturetempsal2021_cleaned, "modeling-data-output-files/moisturetempsal2021_cleaned.csv")
write.csv(moisturetempsal2021_cleaned, "modeling-data-output-files/moisturetempsal2021_cleaned.csv")
write.csv(moisturetempsal2022_cleaned, "modeling-data-output-files/moisturetempsal2022_cleaned.csv")
write.csv(moisturetempsal2021_grouped, "modeling-data-output-files/moisturetempsal2021_grouped.csv")
write.csv(moisturetempsal2022_grouped, "modeling-data-output-files/moisturetempsal2022_grouped.csv")
